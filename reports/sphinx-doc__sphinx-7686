[{"repo": "sphinx-doc/sphinx", "instance_id": "sphinx-doc__sphinx-7686", "base_commit": "752d3285d250bbaf673cff25e83f03f247502021", "patch": "diff --git a/sphinx/ext/autosummary/generate.py b/sphinx/ext/autosummary/generate.py\n--- a/sphinx/ext/autosummary/generate.py\n+++ b/sphinx/ext/autosummary/generate.py\n@@ -18,6 +18,7 @@\n \"\"\"\n \n import argparse\n+import inspect\n import locale\n import os\n import pkgutil\n@@ -176,6 +177,56 @@ def render(self, template_name: str, context: Dict) -> str:\n # -- Generating output ---------------------------------------------------------\n \n \n+class ModuleScanner:\n+    def __init__(self, app: Any, obj: Any) -> None:\n+        self.app = app\n+        self.object = obj\n+\n+    def get_object_type(self, name: str, value: Any) -> str:\n+        return get_documenter(self.app, value, self.object).objtype\n+\n+    def is_skipped(self, name: str, value: Any, objtype: str) -> bool:\n+        try:\n+            return self.app.emit_firstresult('autodoc-skip-member', objtype,\n+                                             name, value, False, {})\n+        except Exception as exc:\n+            logger.warning(__('autosummary: failed to determine %r to be documented, '\n+                              'the following exception was raised:\\n%s'),\n+                           name, exc, type='autosummary')\n+            return False\n+\n+    def scan(self, imported_members: bool) -> List[str]:\n+        members = []\n+        for name in dir(self.object):\n+            try:\n+                value = safe_getattr(self.object, name)\n+            except AttributeError:\n+                value = None\n+\n+            objtype = self.get_object_type(name, value)\n+            if self.is_skipped(name, value, objtype):\n+                continue\n+\n+            try:\n+                if inspect.ismodule(value):\n+                    imported = True\n+                elif safe_getattr(value, '__module__') != self.object.__name__:\n+                    imported = True\n+                else:\n+                    imported = False\n+            except AttributeError:\n+                imported = False\n+\n+            if imported_members:\n+                # list all members up\n+                members.append(name)\n+            elif imported is False:\n+                # list not-imported members up\n+                members.append(name)\n+\n+        return members\n+\n+\n def generate_autosummary_content(name: str, obj: Any, parent: Any,\n                                  template: AutosummaryRenderer, template_name: str,\n                                  imported_members: bool, app: Any,\n@@ -246,7 +297,8 @@ def get_modules(obj: Any) -> Tuple[List[str], List[str]]:\n     ns.update(context)\n \n     if doc.objtype == 'module':\n-        ns['members'] = dir(obj)\n+        scanner = ModuleScanner(app, obj)\n+        ns['members'] = scanner.scan(imported_members)\n         ns['functions'], ns['all_functions'] = \\\n             get_members(obj, {'function'}, imported=imported_members)\n         ns['classes'], ns['all_classes'] = \\\n", "test_patch": "diff --git a/tests/roots/test-ext-autosummary/autosummary_dummy_module.py b/tests/roots/test-ext-autosummary/autosummary_dummy_module.py\n--- a/tests/roots/test-ext-autosummary/autosummary_dummy_module.py\n+++ b/tests/roots/test-ext-autosummary/autosummary_dummy_module.py\n@@ -1,4 +1,4 @@\n-from os import *  # NOQA\n+from os import path  # NOQA\n from typing import Union\n \n \n@@ -17,7 +17,23 @@ def baz(self):\n         pass\n \n \n-def bar(x: Union[int, str], y: int = 1):\n+class _Baz:\n+    pass\n+\n+\n+def bar(x: Union[int, str], y: int = 1) -> None:\n+    pass\n+\n+\n+def _quux():\n+    pass\n+\n+\n+class Exc(Exception):\n+    pass\n+\n+\n+class _Exc(Exception):\n     pass\n \n \ndiff --git a/tests/test_ext_autosummary.py b/tests/test_ext_autosummary.py\n--- a/tests/test_ext_autosummary.py\n+++ b/tests/test_ext_autosummary.py\n@@ -19,7 +19,10 @@\n from sphinx.ext.autosummary import (\n     autosummary_table, autosummary_toc, mangle_signature, import_by_name, extract_summary\n )\n-from sphinx.ext.autosummary.generate import AutosummaryEntry, generate_autosummary_docs, main as autogen_main\n+from sphinx.ext.autosummary.generate import (\n+    AutosummaryEntry, generate_autosummary_content, generate_autosummary_docs,\n+    main as autogen_main\n+)\n from sphinx.testing.util import assert_node, etree_parse\n from sphinx.util.docutils import new_document\n from sphinx.util.osutil import cd\n@@ -189,6 +192,83 @@ def test_escaping(app, status, warning):\n     assert str_content(title) == 'underscore_module_'\n \n \n+@pytest.mark.sphinx(testroot='ext-autosummary')\n+def test_autosummary_generate_content_for_module(app):\n+    import autosummary_dummy_module\n+    template = Mock()\n+\n+    generate_autosummary_content('autosummary_dummy_module', autosummary_dummy_module, None,\n+                                 template, None, False, app, False, {})\n+    assert template.render.call_args[0][0] == 'module'\n+\n+    context = template.render.call_args[0][1]\n+    assert context['members'] == ['Exc', 'Foo', '_Baz', '_Exc', '__builtins__',\n+                                  '__cached__', '__doc__', '__file__', '__name__',\n+                                  '__package__', '_quux', 'bar', 'qux']\n+    assert context['functions'] == ['bar']\n+    assert context['all_functions'] == ['_quux', 'bar']\n+    assert context['classes'] == ['Foo']\n+    assert context['all_classes'] == ['Foo', '_Baz']\n+    assert context['exceptions'] == ['Exc']\n+    assert context['all_exceptions'] == ['Exc', '_Exc']\n+    assert context['attributes'] == ['qux']\n+    assert context['all_attributes'] == ['qux']\n+    assert context['fullname'] == 'autosummary_dummy_module'\n+    assert context['module'] == 'autosummary_dummy_module'\n+    assert context['objname'] == ''\n+    assert context['name'] == ''\n+    assert context['objtype'] == 'module'\n+\n+\n+@pytest.mark.sphinx(testroot='ext-autosummary')\n+def test_autosummary_generate_content_for_module_skipped(app):\n+    import autosummary_dummy_module\n+    template = Mock()\n+\n+    def skip_member(app, what, name, obj, skip, options):\n+        if name in ('Foo', 'bar', 'Exc'):\n+            return True\n+\n+    app.connect('autodoc-skip-member', skip_member)\n+    generate_autosummary_content('autosummary_dummy_module', autosummary_dummy_module, None,\n+                                 template, None, False, app, False, {})\n+    context = template.render.call_args[0][1]\n+    assert context['members'] == ['_Baz', '_Exc', '__builtins__', '__cached__', '__doc__',\n+                                  '__file__', '__name__', '__package__', '_quux', 'qux']\n+    assert context['functions'] == []\n+    assert context['classes'] == []\n+    assert context['exceptions'] == []\n+\n+\n+@pytest.mark.sphinx(testroot='ext-autosummary')\n+def test_autosummary_generate_content_for_module_imported_members(app):\n+    import autosummary_dummy_module\n+    template = Mock()\n+\n+    generate_autosummary_content('autosummary_dummy_module', autosummary_dummy_module, None,\n+                                 template, None, True, app, False, {})\n+    assert template.render.call_args[0][0] == 'module'\n+\n+    context = template.render.call_args[0][1]\n+    assert context['members'] == ['Exc', 'Foo', 'Union', '_Baz', '_Exc', '__builtins__',\n+                                  '__cached__', '__doc__', '__file__', '__loader__',\n+                                  '__name__', '__package__', '__spec__', '_quux',\n+                                  'bar', 'path', 'qux']\n+    assert context['functions'] == ['bar']\n+    assert context['all_functions'] == ['_quux', 'bar']\n+    assert context['classes'] == ['Foo']\n+    assert context['all_classes'] == ['Foo', '_Baz']\n+    assert context['exceptions'] == ['Exc']\n+    assert context['all_exceptions'] == ['Exc', '_Exc']\n+    assert context['attributes'] == ['qux']\n+    assert context['all_attributes'] == ['qux']\n+    assert context['fullname'] == 'autosummary_dummy_module'\n+    assert context['module'] == 'autosummary_dummy_module'\n+    assert context['objname'] == ''\n+    assert context['name'] == ''\n+    assert context['objtype'] == 'module'\n+\n+\n @pytest.mark.sphinx('dummy', testroot='ext-autosummary')\n def test_autosummary_generate(app, status, warning):\n     app.builder.build_all()\n", "problem_statement": "autosummary: The members variable for module template contains imported members\n**Describe the bug**\r\nautosummary: The members variable for module template contains imported members even if autosummary_imported_members is False.\r\n\r\n**To Reproduce**\r\n\r\n```\r\n# _templates/autosummary/module.rst\r\n{{ fullname | escape | underline }}\r\n\r\n.. automodule:: {{ fullname }}\r\n\r\n   .. autosummary::\r\n   {% for item in members %}\r\n      {{ item }}\r\n   {%- endfor %}\r\n\r\n```\r\n```\r\n# example.py\r\nimport os\r\n```\r\n```\r\n# index.rst\r\n.. autosummary::\r\n   :toctree: generated\r\n\r\n   example\r\n```\r\n```\r\n# conf.py\r\nautosummary_generate = True\r\nautosummary_imported_members = False\r\n```\r\n\r\nAs a result, I got following output:\r\n```\r\n# generated/example.rst\r\nexample\r\n=======\r\n\r\n.. automodule:: example\r\n\r\n   .. autosummary::\r\n\r\n      __builtins__\r\n      __cached__\r\n      __doc__\r\n      __file__\r\n      __loader__\r\n      __name__\r\n      __package__\r\n      __spec__\r\n      os\r\n```\r\n\r\n**Expected behavior**\r\nThe template variable `members` should not contain imported members when `autosummary_imported_members` is False.\r\n\r\n**Your project**\r\nNo\r\n\r\n**Screenshots**\r\nNo\r\n\r\n**Environment info**\r\n- OS: Mac\r\n- Python version: 3.8.2\r\n- Sphinx version: 3.1.0dev\r\n- Sphinx extensions:  sphinx.ext.autosummary\r\n- Extra tools: No\r\n\r\n**Additional context**\r\nNo\r\n\n", "hints_text": "", "created_at": "2020-05-17T14:09:10Z", "version": "3.1", "FAIL_TO_PASS": "[\"tests/test_ext_autosummary.py::test_autosummary_generate_content_for_module\", \"tests/test_ext_autosummary.py::test_autosummary_generate_content_for_module_skipped\"]", "PASS_TO_PASS": "[\"tests/test_ext_autosummary.py::test_mangle_signature\", \"tests/test_ext_autosummary.py::test_escaping\", \"tests/test_ext_autosummary.py::test_autosummary_generate\", \"tests/test_ext_autosummary.py::test_autosummary_generate_overwrite1\", \"tests/test_ext_autosummary.py::test_autosummary_generate_overwrite2\", \"tests/test_ext_autosummary.py::test_autosummary_recursive\", \"tests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\", \"tests/test_ext_autosummary.py::test_import_by_name\", \"tests/test_ext_autosummary.py::test_autosummary_imported_members\", \"tests/test_ext_autosummary.py::test_generate_autosummary_docs_property\", \"tests/test_ext_autosummary.py::test_autosummary_skip_member\", \"tests/test_ext_autosummary.py::test_autosummary_template\", \"tests/test_ext_autosummary.py::test_empty_autosummary_generate\", \"tests/test_ext_autosummary.py::test_invalid_autosummary_generate\", \"tests/test_ext_autosummary.py::test_autogen\"]", "environment_setup_commit": "5afc77ee27fc01c57165ab260d3a76751f9ddb35"}, "On branch master\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git restore <file>...\" to discard changes in working directory)\n\tmodified:   setup.py\n\tmodified:   sphinx/ext/autosummary/generate.py\n\tmodified:   tox.ini\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\ncommit 752d3285d250bbaf673cff25e83f03f247502021\nAuthor: Takeshi KOMIYA <i.tkomiya@gmail.com>\nDate:   Thu May 21 00:56:32 2020 +0900\n\n    Update docs (refs: #7469)\n\ndiff --git a/doc/usage/extensions/autosummary.rst b/doc/usage/extensions/autosummary.rst\nindex b5acab65d..38d18361e 100644\n--- a/doc/usage/extensions/autosummary.rst\n+++ b/doc/usage/extensions/autosummary.rst\n@@ -290,7 +290,7 @@ The following variables available in the templates:\n \n     .. versionchanged:: 3.1\n \n-    Attributes of modules are supported.\n+       Attributes of modules are supported.\n \n .. data:: modules\n \ndiff --git a/setup.py b/setup.py\nindex a427d5493..978e3d8e0 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -15,22 +15,22 @@ if sys.version_info < (3, 5):\n     sys.exit(1)\n \n install_requires = [\n-    'sphinxcontrib-applehelp',\n-    'sphinxcontrib-devhelp',\n+    'sphinxcontrib-applehelp<=1.0.7',\n+    'sphinxcontrib-devhelp<=1.0.5',\n     'sphinxcontrib-jsmath',\n-    'sphinxcontrib-htmlhelp',\n-    'sphinxcontrib-serializinghtml',\n-    'sphinxcontrib-qthelp',\n-    'Jinja2>=2.3',\n+    'sphinxcontrib-htmlhelp<=2.0.4',\n+    'sphinxcontrib-serializinghtml<=1.1.9',\n+    'sphinxcontrib-qthelp<=1.0.6',\n+    'Jinja2<3.0',\n     'Pygments>=2.0',\n     'docutils>=0.12',\n     'snowballstemmer>=1.1',\n     'babel>=1.3',\n-    'alabaster>=0.7,<0.8',\n+    'alabaster>=0.7,<0.7.12',\n     'imagesize',\n     'requests>=2.5.0',\n     'setuptools',\n-    'packaging',\n+    'packaging', 'markupsafe<=2.0.1',\n ]\n \n extras_require = {\ndiff --git a/sphinx/ext/autosummary/generate.py b/sphinx/ext/autosummary/generate.py\nindex a57c73fb7..473ac3db6 100644\n--- a/sphinx/ext/autosummary/generate.py\n+++ b/sphinx/ext/autosummary/generate.py\n@@ -18,6 +18,7 @@\n \"\"\"\n \n import argparse\n+import inspect\n import locale\n import os\n import pkgutil\n@@ -176,6 +177,56 @@ class AutosummaryRenderer:\n # -- Generating output ---------------------------------------------------------\n \n \n+class ModuleScanner:\n+    def __init__(self, app: Any, obj: Any) -> None:\n+        self.app = app\n+        self.object = obj\n+\n+    def get_object_type(self, name: str, value: Any) -> str:\n+        return get_documenter(self.app, value, self.object).objtype\n+\n+    def is_skipped(self, name: str, value: Any, objtype: str) -> bool:\n+        try:\n+            return self.app.emit_firstresult('autodoc-skip-member', objtype,\n+                                             name, value, False, {})\n+        except Exception as exc:\n+            logger.warning(__('autosummary: failed to determine %r to be documented, '\n+                              'the following exception was raised:\\n%s'),\n+                           name, exc, type='autosummary')\n+            return False\n+\n+    def scan(self, imported_members: bool) -> List[str]:\n+        members = []\n+        for name in dir(self.object):\n+            try:\n+                value = safe_getattr(self.object, name)\n+            except AttributeError:\n+                value = None\n+\n+            objtype = self.get_object_type(name, value)\n+            if self.is_skipped(name, value, objtype):\n+                continue\n+\n+            try:\n+                if inspect.ismodule(value):\n+                    imported = True\n+                elif safe_getattr(value, '__module__') != self.object.__name__:\n+                    imported = True\n+                else:\n+                    imported = False\n+            except AttributeError:\n+                imported = False\n+\n+            if imported_members:\n+                # list all members up\n+                members.append(name)\n+            elif imported is False:\n+                # list not-imported members up\n+                members.append(name)\n+\n+        return members\n+\n+\n def generate_autosummary_content(name: str, obj: Any, parent: Any,\n                                  template: AutosummaryRenderer, template_name: str,\n                                  imported_members: bool, app: Any,\n@@ -246,7 +297,8 @@ def generate_autosummary_content(name: str, obj: Any, parent: Any,\n     ns.update(context)\n \n     if doc.objtype == 'module':\n-        ns['members'] = dir(obj)\n+        scanner = ModuleScanner(app, obj)\n+        ns['members'] = scanner.scan(imported_members)\n         ns['functions'], ns['all_functions'] = \\\n             get_members(obj, {'function'}, imported=imported_members)\n         ns['classes'], ns['all_classes'] = \\\ndiff --git a/tox.ini b/tox.ini\nindex d9f040544..bf39854b6 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -28,7 +28,7 @@ extras =\n setenv =\n     PYTHONWARNINGS = all,ignore::ImportWarning:importlib._bootstrap_external,ignore::DeprecationWarning:site,ignore::DeprecationWarning:distutils\n commands=\n-    pytest --durations 25 {posargs}\n+    pytest -rA --durations 25 {posargs}\n \n [testenv:flake8]\n basepython = python3\nObtaining file:///testbed\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nRequirement already satisfied: sphinxcontrib-applehelp<=1.0.7 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (1.0.4)\nRequirement already satisfied: sphinxcontrib-devhelp<=1.0.5 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (1.0.2)\nRequirement already satisfied: sphinxcontrib-jsmath in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (1.0.1)\nRequirement already satisfied: sphinxcontrib-htmlhelp<=2.0.4 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (2.0.1)\nRequirement already satisfied: sphinxcontrib-serializinghtml<=1.1.9 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (1.1.5)\nRequirement already satisfied: sphinxcontrib-qthelp<=1.0.6 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (1.0.3)\nRequirement already satisfied: Jinja2<3.0 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (2.11.3)\nRequirement already satisfied: Pygments>=2.0 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (2.18.0)\nRequirement already satisfied: docutils>=0.12 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (0.21.2)\nRequirement already satisfied: snowballstemmer>=1.1 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (2.2.0)\nRequirement already satisfied: babel>=1.3 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (2.16.0)\nRequirement already satisfied: alabaster<0.7.12,>=0.7 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (0.7.11)\nRequirement already satisfied: imagesize in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (1.4.1)\nRequirement already satisfied: requests>=2.5.0 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (2.32.3)\nRequirement already satisfied: setuptools in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (75.1.0)\nRequirement already satisfied: packaging in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (24.1)\nRequirement already satisfied: markupsafe<=2.0.1 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (2.0.1)\nRequirement already satisfied: pytest in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (8.3.3)\nRequirement already satisfied: pytest-cov in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (5.0.0)\nRequirement already satisfied: html5lib in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (1.1)\nRequirement already satisfied: typed_ast in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (1.5.5)\nRequirement already satisfied: cython in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Sphinx==3.1.0.dev20241007) (3.0.11)\nRequirement already satisfied: charset-normalizer<4,>=2 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from requests>=2.5.0->Sphinx==3.1.0.dev20241007) (3.3.2)\nRequirement already satisfied: idna<4,>=2.5 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from requests>=2.5.0->Sphinx==3.1.0.dev20241007) (3.10)\nRequirement already satisfied: urllib3<3,>=1.21.1 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from requests>=2.5.0->Sphinx==3.1.0.dev20241007) (2.2.3)\nRequirement already satisfied: certifi>=2017.4.17 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from requests>=2.5.0->Sphinx==3.1.0.dev20241007) (2024.8.30)\nRequirement already satisfied: six>=1.9 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from html5lib->Sphinx==3.1.0.dev20241007) (1.16.0)\nRequirement already satisfied: webencodings in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from html5lib->Sphinx==3.1.0.dev20241007) (0.5.1)\nRequirement already satisfied: iniconfig in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from pytest->Sphinx==3.1.0.dev20241007) (2.0.0)\nRequirement already satisfied: pluggy<2,>=1.5 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from pytest->Sphinx==3.1.0.dev20241007) (1.5.0)\nRequirement already satisfied: exceptiongroup>=1.0.0rc8 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from pytest->Sphinx==3.1.0.dev20241007) (1.2.2)\nRequirement already satisfied: tomli>=1 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from pytest->Sphinx==3.1.0.dev20241007) (2.0.2)\nRequirement already satisfied: coverage>=5.2.1 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from coverage[toml]>=5.2.1->pytest-cov->Sphinx==3.1.0.dev20241007) (7.6.1)\nInstalling collected packages: Sphinx\n  Attempting uninstall: Sphinx\n    Found existing installation: Sphinx 3.1.0.dev20241007\n    Uninstalling Sphinx-3.1.0.dev20241007:\n      Successfully uninstalled Sphinx-3.1.0.dev20241007\n  Running setup.py develop for Sphinx\nSuccessfully installed Sphinx\npy39: commands[0]> pytest -rA --durations 25 tests/roots/test-ext-autosummary/autosummary_dummy_module.py tests/test_ext_autosummary.py\n============================= test session starts ==============================\nplatform linux -- Python 3.9.20, pytest-8.3.3, pluggy-1.5.0\ncachedir: .tox/py39/.pytest_cache\nlibraries: Sphinx-3.1.0+/752d3285d, docutils-0.21.2\nbase tempdir: /tmp/pytest-of-root/pytest-0\nrootdir: /testbed\nconfigfile: setup.cfg\nplugins: cov-5.0.0\ncollected 21 items\n\ntests/test_ext_autosummary.py .FF...F......F.......                      [100%]\n\n=================================== FAILURES ===================================\n_____________________________ test_extract_summary _____________________________\n\ncapsys = <_pytest.capture.CaptureFixture object at 0x7f0cdb40db80>\n\n    def test_extract_summary(capsys):\n        settings = Mock(language_code='',\n                        id_prefix='',\n                        auto_id_prefix='',\n                        pep_reference=False,\n                        rfc_reference=False)\n        document = new_document('', settings)\n    \n        # normal case\n        doc = ['',\n               'This is a first sentence. And second one.',\n               '',\n               'Second block is here']\n>       assert extract_summary(doc, document) == 'This is a first sentence.'\n\ntests/test_ext_autosummary.py:91: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nsphinx/ext/autosummary/__init__.py:518: in extract_summary\n    state_machine.run(doc, node)\n/opt/miniconda3/envs/testbed/lib/python3.9/site-packages/docutils/parsers/rst/states.py:152: in run\n    self.language = languages.get_language(\n/opt/miniconda3/envs/testbed/lib/python3.9/site-packages/docutils/languages/__init__.py:68: in __call__\n    module = self.import_from_packages(tag, reporter)\n/opt/miniconda3/envs/testbed/lib/python3.9/site-packages/docutils/languages/__init__.py:42: in import_from_packages\n    module = import_module(package+name)\n/opt/miniconda3/envs/testbed/lib/python3.9/importlib/__init__.py:127: in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n<frozen importlib._bootstrap>:1027: in _gcd_import\n    ???\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nname = '', package = None, level = 0\n\n>   ???\nE   ValueError: Empty module name\n\n<frozen importlib._bootstrap>:961: ValueError\n____________________________ test_get_items_summary ____________________________\n\nmake_app = <function make_app.<locals>.make at 0x7f0cdb8341f0>\napp_params = app_params(args=['dummy'], kwargs={'confoverrides': {'extensions': ['sphinx.ext.autosummary'], 'autosummary_generate':...mary_generate_overwrite': False, 'source_suffix': '.rst'}, 'srcdir': path('/tmp/pytest-of-root/pytest-0/autosummary')})\n\n    @pytest.mark.sphinx('dummy', **default_kw)\n    def test_get_items_summary(make_app, app_params):\n        import sphinx.ext.autosummary\n        import sphinx.ext.autosummary.generate\n        args, kwargs = app_params\n        app = make_app(*args, **kwargs)\n        sphinx.ext.autosummary.generate.setup_documenters(app)\n        # monkey-patch Autosummary.get_items so we can easily get access to it's\n        # results..\n        orig_get_items = sphinx.ext.autosummary.Autosummary.get_items\n    \n        autosummary_items = {}\n    \n        def new_get_items(self, names, *args, **kwargs):\n            results = orig_get_items(self, names, *args, **kwargs)\n            for name, result in zip(names, results):\n                autosummary_items[name] = result\n            return results\n    \n        def handler(app, what, name, obj, options, lines):\n            assert isinstance(lines, list)\n    \n            # ensure no docstring is processed twice:\n            assert 'THIS HAS BEEN HANDLED' not in lines\n            lines.append('THIS HAS BEEN HANDLED')\n        app.connect('autodoc-process-docstring', handler)\n    \n        sphinx.ext.autosummary.Autosummary.get_items = new_get_items\n        try:\n            app.builder.build_all()\n        finally:\n            sphinx.ext.autosummary.Autosummary.get_items = orig_get_items\n    \n        html_warnings = app._warning.getvalue()\n>       assert html_warnings == ''\nE       AssertionError: assert '\\x1b[91mWARN...b[39;49;00m\\n' == ''\nE         \nE         + \u001b[91mWARNING: while setting up extension sphinx.addnodes: node class 'meta' is already registered, its visitors will be overridden\u001b[39;49;00m\n\ntests/test_ext_autosummary.py:149: AssertionError\n________ test_autosummary_generate_content_for_module_imported_members _________\n\napp = <SphinxTestApp buildername='html'>\n\n    @pytest.mark.sphinx(testroot='ext-autosummary')\n    def test_autosummary_generate_content_for_module_imported_members(app):\n        import autosummary_dummy_module\n        template = Mock()\n    \n        generate_autosummary_content('autosummary_dummy_module', autosummary_dummy_module, None,\n                                     template, None, True, app, False, {})\n        assert template.render.call_args[0][0] == 'module'\n    \n        context = template.render.call_args[0][1]\n>       assert context['members'] == ['Exc', 'Foo', 'Union', '_Baz', '_Exc', '__builtins__',\n                                      '__cached__', '__doc__', '__file__', '__loader__',\n                                      '__name__', '__package__', '__spec__', '_quux',\n                                      'bar', 'path', 'qux']\nE       AssertionError: assert ['@py_builtin..., '_Baz', ...] == ['Exc', 'Foo'...ltins__', ...]\nE         \nE         At index 0 diff: '@py_builtins' != 'Exc'\nE         Left contains 2 more items, first extra item: 'path'\nE         Use -v to get more diff\n\ntests/test_ext_autosummary.py:253: AssertionError\n--------------------------- Captured stdout teardown ---------------------------\n# testroot: root\n# builder: html\n# srcdir: /tmp/pytest-of-root/pytest-0/ext-autosummary\n# outdir: /tmp/pytest-of-root/pytest-0/ext-autosummary/_build/html\n# status: \n\u001b[01mRunning Sphinx v3.1.0+/752d3285d\u001b[39;49;00m\n[autosummary] generating autosummary for: generated/autosummary_dummy_module.Foo.Bar.rst, generated/autosummary_dummy_module.Foo.rst, generated/autosummary_dummy_module.bar.rst, generated/autosummary_dummy_module.qux.rst, generated/autosummary_dummy_module.rst, index.rst\n\n# warning: \n\u001b[91mWARNING: while setting up extension sphinx.addnodes: node class 'meta' is already registered, its visitors will be overridden\u001b[39;49;00m\n\u001b[91mWARNING: [autosummary] failed to import 'autosummary_importfail': no module named autosummary_importfail\u001b[39;49;00m\n\n________________________ test_autosummary_mock_imports _________________________\n\napp = <SphinxTestApp buildername='dummy'>\nstatus = <_io.StringIO object at 0x7f0cda4f2d30>\nwarning = <_io.StringIO object at 0x7f0cda4f2f70>\n\n    @pytest.mark.sphinx('dummy', testroot='ext-autosummary-mock_imports')\n    def test_autosummary_mock_imports(app, status, warning):\n        try:\n            app.build()\n>           assert warning.getvalue() == ''\nE           AssertionError: assert '\\x1b[91mWARN...b[39;49;00m\\n' == ''\nE             \nE             + \u001b[91mWARNING: while setting up extension sphinx.addnodes: node class 'meta' is already registered, its visitors will be overridden\u001b[39;49;00m\n\ntests/test_ext_autosummary.py:421: AssertionError\n--------------------------- Captured stdout teardown ---------------------------\n# testroot: root\n# builder: dummy\n# srcdir: /tmp/pytest-of-root/pytest-0/ext-autosummary-mock_imports\n# outdir: /tmp/pytest-of-root/pytest-0/ext-autosummary-mock_imports/_build/dummy\n# status: \n\u001b[01mRunning Sphinx v3.1.0+/752d3285d\u001b[39;49;00m\n[autosummary] generating autosummary for: index.rst\n[autosummary] generating autosummary for: /tmp/pytest-of-root/pytest-0/ext-autosummary-mock_imports/generated/foo.rst\n\u001b[01mbuilding [mo]: \u001b[39;49;00mtargets for 0 po files that are out of date\n\u001b[01mbuilding [dummy]: \u001b[39;49;00mtargets for 1 source files that are out of date\n\u001b[01mupdating environment: \u001b[39;49;00m[new config] 2 added, 0 changed, 0 removed\n\u001b[01mreading sources... \u001b[39;49;00m[ 50%] \u001b[35mgenerated/foo\u001b[39;49;00m                                        \n\u001b[01mreading sources... \u001b[39;49;00m[100%] \u001b[35mindex\u001b[39;49;00m                                                \n\u001b[01mlooking for now-outdated files... \u001b[39;49;00mnone found\n\u001b[01mpickling environment... \u001b[39;49;00mdone\n\u001b[01mchecking consistency... \u001b[39;49;00mdone\n\u001b[01mpreparing documents... \u001b[39;49;00mdone\n\u001b[01mwriting output... \u001b[39;49;00m[ 50%] \u001b[32mgenerated/foo\u001b[39;49;00m                                         \n\u001b[01mwriting output... \u001b[39;49;00m[100%] \u001b[32mindex\u001b[39;49;00m                                                 \n\u001b[01mbuild succeeded, 1 warning.\u001b[39;49;00m\n\nThe dummy builder generates no files.\n\n# warning: \n\u001b[91mWARNING: while setting up extension sphinx.addnodes: node class 'meta' is already registered, its visitors will be overridden\u001b[39;49;00m\n\n=============================== warnings summary ===============================\nsphinx/util/docutils.py:45\n  /testbed/sphinx/util/docutils.py:45: DeprecationWarning: distutils Version classes are deprecated. Use packaging.version instead.\n    __version_info__ = tuple(LooseVersion(docutils.__version__).version)\n\nsphinx/registry.py:22\n  /testbed/sphinx/registry.py:22: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html\n    from pkg_resources import iter_entry_points\n\n../opt/miniconda3/envs/testbed/lib/python3.9/site-packages/pkg_resources/__init__.py:3154\n../opt/miniconda3/envs/testbed/lib/python3.9/site-packages/pkg_resources/__init__.py:3154\n../opt/miniconda3/envs/testbed/lib/python3.9/site-packages/pkg_resources/__init__.py:3154\n../opt/miniconda3/envs/testbed/lib/python3.9/site-packages/pkg_resources/__init__.py:3154\n  /opt/miniconda3/envs/testbed/lib/python3.9/site-packages/pkg_resources/__init__.py:3154: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('sphinxcontrib')`.\n  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages\n    declare_namespace(pkg)\n\nsphinx/directives/patches.py:15\n  /testbed/sphinx/directives/patches.py:15: DeprecationWarning: The `docutils.parsers.rst.directive.html` module will be removed in Docutils 2.0. Since Docutils 0.18, the \"Meta\" node is defined in `docutils.parsers.rst.directives.misc`.\n    from docutils.parsers.rst.directives import images, html, tables\n\ntests/test_ext_autosummary.py::test_get_items_summary\ntests/test_ext_autosummary.py::test_get_items_summary\ntests/test_ext_autosummary.py::test_get_items_summary\ntests/test_ext_autosummary.py::test_autosummary_generate\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_empty_autosummary_generate\n  /testbed/sphinx/ext/autosummary/__init__.py:534: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    if not node.traverse(nodes.system_message):\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/transforms/__init__.py:211: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse():  # type: Node\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/transforms/i18n.py:88: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(addnodes.translatable):\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/transforms/__init__.py:111: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for ref in self.document.traverse(nodes.substitution_reference):\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/transforms/__init__.py:132: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(nodes.target):\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/transforms/__init__.py:151: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(nodes.block_quote):\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/transforms/__init__.py:176: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(nodes.Element):\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/transforms/__init__.py:223: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(addnodes.index):\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/transforms/references.py:30: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(nodes.substitution_definition):\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/transforms/__init__.py:190: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(nodes.section):\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/transforms/__init__.py:280: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(nodes.doctest_block):\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/domains/citation.py:117: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(nodes.citation):\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/domains/citation.py:136: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(nodes.citation_reference):\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/builders/latex/transforms.py:37: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(matcher):  # type: nodes.Element\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/transforms/__init__.py:292: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(matcher):  # type: Element\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/util/compat.py:44: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(addnodes.index):\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/domains/index.py:52: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in document.traverse(addnodes.index):\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/domains/math.py:85: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    self.data['has_equations'][docname] = any(document.traverse(math_node))\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/environment/collectors/asset.py:47: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in doctree.traverse(nodes.image):\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/environment/collectors/asset.py:124: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in doctree.traverse(addnodes.download_reference):\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/environment/collectors/title.py:46: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in doctree.traverse(nodes.section):\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/transforms/__init__.py:302: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(nodes.system_message):\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/transforms/__init__.py:391: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(addnodes.manpage):\n\ntests/test_ext_autosummary.py: 31 warnings\n  /testbed/sphinx/transforms/i18n.py:484: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for inline in self.document.traverse(matcher):  # type: nodes.inline\n\ntests/test_ext_autosummary.py::test_get_items_summary\n  /testbed/sphinx/util/nodes.py:153: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for classifier in reversed(list(node.parent.traverse(nodes.classifier))):\n\ntests/test_ext_autosummary.py: 37 warnings\n  /testbed/sphinx/domains/cpp.py:6877: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(AliasNode):\n\ntests/test_ext_autosummary.py: 37 warnings\n  /testbed/sphinx/transforms/post_transforms/__init__.py:71: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(addnodes.pending_xref):\n\ntests/test_ext_autosummary.py: 82 warnings\n  /testbed/sphinx/util/nodes.py:596: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in document.traverse(addnodes.only):\n\ntests/test_ext_autosummary.py: 74 warnings\n  /testbed/sphinx/transforms/post_transforms/images.py:35: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(nodes.image):\n\ntests/test_ext_autosummary.py: 32 warnings\n  /testbed/sphinx/transforms/post_transforms/__init__.py:215: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(addnodes.desc_sig_element):\n\ntests/test_ext_autosummary.py: 37 warnings\n  /testbed/sphinx/builders/latex/transforms.py:595: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(nodes.title):\n\ntests/test_ext_autosummary.py: 33 warnings\n  /testbed/sphinx/builders/latex/transforms.py:597: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for i, index in enumerate(node.traverse(addnodes.index)):\n\ntests/test_ext_autosummary.py: 37 warnings\n  /testbed/sphinx/transforms/post_transforms/code.py:44: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(addnodes.highlightlang):\n\ntests/test_ext_autosummary.py: 37 warnings\n  /testbed/sphinx/transforms/post_transforms/code.py:99: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for lbnode in self.document.traverse(nodes.literal_block):  # type: nodes.literal_block\n\ntests/test_ext_autosummary.py: 37 warnings\n  /testbed/sphinx/transforms/post_transforms/code.py:103: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for dbnode in self.document.traverse(nodes.doctest_block):  # type: nodes.doctest_block\n\ntests/test_ext_autosummary.py: 36 warnings\n  /testbed/sphinx/environment/__init__.py:541: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for toctreenode in doctree.traverse(addnodes.toctree):\n\ntests/test_ext_autosummary.py: 41 warnings\n  /testbed/sphinx/environment/adapters/toctree.py:204: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for subtocnode in toc.traverse(addnodes.toctree):\n\ntests/test_ext_autosummary.py: 17 warnings\n  /testbed/sphinx/environment/adapters/toctree.py:262: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for refnode in newnode.traverse(nodes.reference):\n\ntests/test_ext_autosummary.py::test_escaping\ntests/test_ext_autosummary.py::test_escaping\ntests/test_ext_autosummary.py::test_escaping\ntests/test_ext_autosummary.py::test_escaping\ntests/test_ext_autosummary.py::test_escaping\n  /testbed/sphinx/builders/xml.py:79: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in doctree.traverse(nodes.Element):\n\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\n  /testbed/sphinx/builders/latex/__init__.py:258: DeprecationWarning: The frontend.OptionParser class will be replaced by a subclass of argparse.ArgumentParser in Docutils 0.21 or later.\n    docsettings = OptionParser(\n\ntests/test_ext_autosummary.py: 199 warnings\n  /opt/miniconda3/envs/testbed/lib/python3.9/optparse.py:1000: DeprecationWarning: The frontend.Option class will be removed in Docutils 0.21 or later.\n    option = self.option_class(*args, **kwargs)\n\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\n  /testbed/sphinx/builders/latex/__init__.py:277: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    toctree = next(iter(doctree.traverse(addnodes.toctree)), None)\n\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\n  /testbed/sphinx/util/nodes.py:414: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for toctreenode in tree.traverse(addnodes.toctree):\n\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\n  /testbed/sphinx/util/nodes.py:432: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for sectionnode in sof.traverse(nodes.section):\n\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\n  /testbed/sphinx/builders/latex/transforms.py:515: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(matcher):  # type: addnodes.pending_xref\n\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\n  /testbed/sphinx/builders/latex/transforms.py:534: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(addnodes.pending_xref):\n\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\n  /testbed/sphinx/builders/latex/transforms.py:560: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(addnodes.start_of_file):\n\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\n  /testbed/sphinx/builders/latex/transforms.py:549: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(matcher):  # type: nodes.container\n\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\n  /testbed/sphinx/builders/latex/transforms.py:342: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    footnotes = list(self.document.traverse(nodes.footnote))\n\ntests/test_ext_autosummary.py: 11 warnings\n  /testbed/sphinx/builders/latex/transforms.py:417: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    tbody = list(node.traverse(nodes.tbody))[0]\n\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\n  /testbed/sphinx/builders/latex/transforms.py:495: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(nodes.citation):\n\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\n  /testbed/sphinx/builders/latex/__init__.py:349: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for pendingnode in largetree.traverse(addnodes.pending_xref):\n\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\n  /testbed/sphinx/builders/latex/__init__.py:306: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for toctree in tree.traverse(addnodes.toctree):\n\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\n  /testbed/sphinx/builders/__init__.py:182: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in doctree.traverse(nodes.image):\n\ntests/test_ext_autosummary.py: 128 warnings\n  /testbed/sphinx/writers/latex.py:987: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    if len(node.traverse(nodes.paragraph)) >= 2:\n\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\ntests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\n  /testbed/sphinx/writers/latex.py:663: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    if node.traverse(nodes.image):\n\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_template\n  /testbed/sphinx/builders/html/__init__.py:414: DeprecationWarning: The frontend.OptionParser class will be replaced by a subclass of argparse.ArgumentParser in Docutils 0.21 or later.\n    self.docsettings = OptionParser(\n\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\n  /testbed/sphinx/builders/html/transforms.py:44: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in self.document.traverse(matcher):  # type: nodes.literal\n\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\n  /testbed/sphinx/builders/html/__init__.py:826: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in doctree.traverse(nodes.image):\n\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\n  /testbed/sphinx/environment/adapters/toctree.py:313: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for node in toc.traverse(nodes.reference):\n\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\n  /opt/miniconda3/envs/testbed/lib/python3.9/site-packages/alabaster/layout.html:114: DeprecationWarning: 'soft_unicode' has been renamed to 'soft_str'. The old name will be removed in MarkupSafe 2.1.\n    _gaq.push(['_setAllowLinker', true]);\n\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\n  /opt/miniconda3/envs/testbed/lib/python3.9/site-packages/alabaster/about.html:70: DeprecationWarning: 'soft_unicode' has been renamed to 'soft_str'. The old name will be removed in MarkupSafe 2.1.\n\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\n  /opt/miniconda3/envs/testbed/lib/python3.9/site-packages/alabaster/about.html:99: DeprecationWarning: 'soft_unicode' has been renamed to 'soft_str'. The old name will be removed in MarkupSafe 2.1.\n\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\n  /testbed/sphinx/environment/adapters/toctree.py:327: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for toctreenode in doctree.traverse(addnodes.toctree):\n\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\n  /opt/miniconda3/envs/testbed/lib/python3.9/site-packages/alabaster/layout.html:215: DeprecationWarning: 'soft_unicode' has been renamed to 'soft_str'. The old name will be removed in MarkupSafe 2.1.\n\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\n  /opt/miniconda3/envs/testbed/lib/python3.9/site-packages/alabaster/layout.html:238: DeprecationWarning: 'soft_unicode' has been renamed to 'soft_str'. The old name will be removed in MarkupSafe 2.1.\n\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_template\n  <template>:33: DeprecationWarning: 'soft_unicode' has been renamed to 'soft_str'. The old name will be removed in MarkupSafe 2.1.\n\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_template\n  <template>:224: DeprecationWarning: 'soft_unicode' has been renamed to 'soft_str'. The old name will be removed in MarkupSafe 2.1.\n\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_template\n  <template>:386: DeprecationWarning: 'soft_unicode' has been renamed to 'soft_str'. The old name will be removed in MarkupSafe 2.1.\n\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_template\n  <template>:401: DeprecationWarning: 'soft_unicode' has been renamed to 'soft_str'. The old name will be removed in MarkupSafe 2.1.\n\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\n  /testbed/sphinx/util/nodes.py:348: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for img in node.traverse(nodes.image):\n\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_skip_member\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\ntests/test_ext_autosummary.py::test_autosummary_template\n  /testbed/sphinx/util/nodes.py:350: PendingDeprecationWarning: nodes.Node.traverse() is obsoleted by Node.findall().\n    for raw in node.traverse(nodes.raw):\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n==================================== PASSES ====================================\n--------------------------- Captured stdout teardown ---------------------------\n# testroot: root\n# builder: xml\n# srcdir: /tmp/pytest-of-root/pytest-0/autosummary\n# outdir: /tmp/pytest-of-root/pytest-0/autosummary/_build/xml\n# status: \n\u001b[01mRunning Sphinx v3.1.0+/752d3285d\u001b[39;49;00m\n\u001b[01mloading pickled environment... \u001b[39;49;00mdone\n[autosummary] generating autosummary for: dummy_module.rst, generated/sphinx.application.Sphinx.rst, index.rst, sphinx.rst, underscore_module_.rst\n\u001b[01mbuilding [xml]: \u001b[39;49;00mall source files\n\u001b[01mupdating environment: \u001b[39;49;00m0 added, 0 changed, 0 removed\n\u001b[01mlooking for now-outdated files... \u001b[39;49;00mnone found\n\u001b[01mpreparing documents... \u001b[39;49;00mdone\n\u001b[01mwriting output... \u001b[39;49;00m[ 20%] \u001b[32mdummy_module\u001b[39;49;00m                                          \n\u001b[01mwriting output... \u001b[39;49;00m[ 40%] \u001b[32mgenerated/sphinx.application.Sphinx\u001b[39;49;00m                   \n\u001b[01mwriting output... \u001b[39;49;00m[ 60%] \u001b[32mindex\u001b[39;49;00m                                                 \n\u001b[01mwriting output... \u001b[39;49;00m[ 80%] \u001b[32msphinx\u001b[39;49;00m                                                \n\u001b[01mwriting output... \u001b[39;49;00m[100%] \u001b[32munderscore_module_\u001b[39;49;00m                                    \n\n# warning: \n\u001b[91mWARNING: while setting up extension sphinx.addnodes: node class 'meta' is already registered, its visitors will be overridden\u001b[39;49;00m\n\n--------------------------- Captured stdout teardown ---------------------------\n# testroot: root\n# builder: html\n# srcdir: /tmp/pytest-of-root/pytest-0/ext-autosummary\n# outdir: /tmp/pytest-of-root/pytest-0/ext-autosummary/_build/html\n# status: \n\u001b[01mRunning Sphinx v3.1.0+/752d3285d\u001b[39;49;00m\n[autosummary] generating autosummary for: index.rst\n[autosummary] generating autosummary for: /tmp/pytest-of-root/pytest-0/ext-autosummary/generated/autosummary_dummy_module.Foo.Bar.rst, /tmp/pytest-of-root/pytest-0/ext-autosummary/generated/autosummary_dummy_module.Foo.rst, /tmp/pytest-of-root/pytest-0/ext-autosummary/generated/autosummary_dummy_module.bar.rst, /tmp/pytest-of-root/pytest-0/ext-autosummary/generated/autosummary_dummy_module.qux.rst, /tmp/pytest-of-root/pytest-0/ext-autosummary/generated/autosummary_dummy_module.rst\n\n# warning: \n\u001b[91mWARNING: while setting up extension sphinx.addnodes: node class 'meta' is already registered, its visitors will be overridden\u001b[39;49;00m\n\u001b[91mWARNING: [autosummary] failed to import 'autosummary_importfail': no module named autosummary_importfail\u001b[39;49;00m\n\n--------------------------- Captured stdout teardown ---------------------------\n# testroot: root\n# builder: html\n# srcdir: /tmp/pytest-of-root/pytest-0/ext-autosummary\n# outdir: /tmp/pytest-of-root/pytest-0/ext-autosummary/_build/html\n# status: \n\u001b[01mRunning Sphinx v3.1.0+/752d3285d\u001b[39;49;00m\n[autosummary] generating autosummary for: generated/autosummary_dummy_module.Foo.Bar.rst, generated/autosummary_dummy_module.Foo.rst, generated/autosummary_dummy_module.bar.rst, generated/autosummary_dummy_module.qux.rst, generated/autosummary_dummy_module.rst, index.rst\n\n# warning: \n\u001b[91mWARNING: while setting up extension sphinx.addnodes: node class 'meta' is already registered, its visitors will be overridden\u001b[39;49;00m\n\u001b[91mWARNING: [autosummary] failed to import 'autosummary_importfail': no module named autosummary_importfail\u001b[39;49;00m\n\n--------------------------- Captured stdout teardown ---------------------------\n# testroot: root\n# builder: dummy\n# srcdir: /tmp/pytest-of-root/pytest-0/ext-autosummary\n# outdir: /tmp/pytest-of-root/pytest-0/ext-autosummary/_build/dummy\n# status: \n\u001b[01mRunning Sphinx v3.1.0+/752d3285d\u001b[39;49;00m\n[autosummary] generating autosummary for: generated/autosummary_dummy_module.Foo.Bar.rst, generated/autosummary_dummy_module.Foo.rst, generated/autosummary_dummy_module.bar.rst, generated/autosummary_dummy_module.qux.rst, generated/autosummary_dummy_module.rst, index.rst\n\u001b[01mbuilding [dummy]: \u001b[39;49;00mall source files\n\u001b[01mupdating environment: \u001b[39;49;00m[new config] 6 added, 0 changed, 0 removed\n\u001b[01mreading sources... \u001b[39;49;00m[ 16%] \u001b[35mgenerated/autosummary_dummy_module\u001b[39;49;00m                   \n\u001b[01mreading sources... \u001b[39;49;00m[ 33%] \u001b[35mgenerated/autosummary_dummy_module.Foo\u001b[39;49;00m               \n\u001b[01mreading sources... \u001b[39;49;00m[ 50%] \u001b[35mgenerated/autosummary_dummy_module.Foo.Bar\u001b[39;49;00m           \n\u001b[01mreading sources... \u001b[39;49;00m[ 66%] \u001b[35mgenerated/autosummary_dummy_module.bar\u001b[39;49;00m               \n\u001b[01mreading sources... \u001b[39;49;00m[ 83%] \u001b[35mgenerated/autosummary_dummy_module.qux\u001b[39;49;00m               \n\u001b[01mreading sources... \u001b[39;49;00m[100%] \u001b[35mindex\u001b[39;49;00m                                                \n\u001b[01mlooking for now-outdated files... \u001b[39;49;00mnone found\n\u001b[01mpickling environment... \u001b[39;49;00mdone\n\u001b[01mchecking consistency... \u001b[39;49;00mdone\n\u001b[01mpreparing documents... \u001b[39;49;00mdone\n\u001b[01mwriting output... \u001b[39;49;00m[ 16%] \u001b[32mgenerated/autosummary_dummy_module\u001b[39;49;00m                    \n\u001b[01mwriting output... \u001b[39;49;00m[ 33%] \u001b[32mgenerated/autosummary_dummy_module.Foo\u001b[39;49;00m                \n\u001b[01mwriting output... \u001b[39;49;00m[ 50%] \u001b[32mgenerated/autosummary_dummy_module.Foo.Bar\u001b[39;49;00m            \n\u001b[01mwriting output... \u001b[39;49;00m[ 66%] \u001b[32mgenerated/autosummary_dummy_module.bar\u001b[39;49;00m                \n\u001b[01mwriting output... \u001b[39;49;00m[ 83%] \u001b[32mgenerated/autosummary_dummy_module.qux\u001b[39;49;00m                \n\u001b[01mwriting output... \u001b[39;49;00m[100%] \u001b[32mindex\u001b[39;49;00m                                                 \n\n# warning: \n\u001b[91mWARNING: while setting up extension sphinx.addnodes: node class 'meta' is already registered, its visitors will be overridden\u001b[39;49;00m\n\u001b[91mWARNING: [autosummary] failed to import 'autosummary_importfail': no module named autosummary_importfail\u001b[39;49;00m\n\u001b[91mWARNING: don't know which module to import for autodocumenting 'Foo.Bar' (try placing a \"module\" or \"currentmodule\" directive in the document, or giving an explicit module name)\u001b[39;49;00m\n\u001b[91mWARNING: autosummary: failed to import autosummary_importfail\u001b[39;49;00m\n\n--------------------------- Captured stdout teardown ---------------------------\n# testroot: root\n# builder: dummy\n# srcdir: /tmp/pytest-of-root/pytest-0/ext-autosummary-recursive\n# outdir: /tmp/pytest-of-root/pytest-0/ext-autosummary-recursive/_build/dummy\n# status: \n\u001b[01mRunning Sphinx v3.1.0+/752d3285d\u001b[39;49;00m\n[autosummary] generating autosummary for: index.rst\n[autosummary] generating autosummary for: /tmp/pytest-of-root/pytest-0/ext-autosummary-recursive/generated/package.rst, /tmp/pytest-of-root/pytest-0/ext-autosummary-recursive/generated/package2.rst\n[autosummary] generating autosummary for: /tmp/pytest-of-root/pytest-0/ext-autosummary-recursive/generated/package.module.rst, /tmp/pytest-of-root/pytest-0/ext-autosummary-recursive/generated/package.package.rst\n[autosummary] generating autosummary for: /tmp/pytest-of-root/pytest-0/ext-autosummary-recursive/generated/package.package.module.rst\n\u001b[01mbuilding [mo]: \u001b[39;49;00mtargets for 0 po files that are out of date\n\u001b[01mbuilding [dummy]: \u001b[39;49;00mtargets for 1 source files that are out of date\n\u001b[01mupdating environment: \u001b[39;49;00m[new config] 6 added, 0 changed, 0 removed\n\u001b[01mreading sources... \u001b[39;49;00m[ 16%] \u001b[35mgenerated/package\u001b[39;49;00m                                    \n\u001b[01mreading sources... \u001b[39;49;00m[ 33%] \u001b[35mgenerated/package.module\u001b[39;49;00m                             \n\u001b[01mreading sources... \u001b[39;49;00m[ 50%] \u001b[35mgenerated/package.package\u001b[39;49;00m                            \n\u001b[01mreading sources... \u001b[39;49;00m[ 66%] \u001b[35mgenerated/package.package.module\u001b[39;49;00m                     \n\u001b[01mreading sources... \u001b[39;49;00m[ 83%] \u001b[35mgenerated/package2\u001b[39;49;00m                                   \n\u001b[01mreading sources... \u001b[39;49;00m[100%] \u001b[35mindex\u001b[39;49;00m                                                \n\u001b[01mlooking for now-outdated files... \u001b[39;49;00mnone found\n\u001b[01mpickling environment... \u001b[39;49;00mdone\n\u001b[01mchecking consistency... \u001b[39;49;00mdone\n\u001b[01mpreparing documents... \u001b[39;49;00mdone\n\u001b[01mwriting output... \u001b[39;49;00m[ 16%] \u001b[32mgenerated/package\u001b[39;49;00m                                     \n\u001b[01mwriting output... \u001b[39;49;00m[ 33%] \u001b[32mgenerated/package.module\u001b[39;49;00m                              \n\u001b[01mwriting output... \u001b[39;49;00m[ 50%] \u001b[32mgenerated/package.package\u001b[39;49;00m                             \n\u001b[01mwriting output... \u001b[39;49;00m[ 66%] \u001b[32mgenerated/package.package.module\u001b[39;49;00m                      \n\u001b[01mwriting output... \u001b[39;49;00m[ 83%] \u001b[32mgenerated/package2\u001b[39;49;00m                                    \n\u001b[01mwriting output... \u001b[39;49;00m[100%] \u001b[32mindex\u001b[39;49;00m                                                 \n\u001b[01mbuild succeeded, 4 warnings.\u001b[39;49;00m\n\nThe dummy builder generates no files.\n\n# warning: \n\u001b[91mWARNING: while setting up extension sphinx.addnodes: node class 'meta' is already registered, its visitors will be overridden\u001b[39;49;00m\n\u001b[91mWARNING: [autosummary] failed to import 'package.module_importfail': no module named package.module_importfail\u001b[39;49;00m\n\u001b[91mWARNING: autosummary: failed to import package.module_importfail\u001b[39;49;00m\n\u001b[91m/tmp/pytest-of-root/pytest-0/ext-autosummary-recursive/generated/package.module.rst: WARNING: document isn't included in any toctree\u001b[39;49;00m\n\n_____________________ test_autosummary_latex_table_colspec _____________________\n----------------------------- Captured stdout call -----------------------------\n\u001b[01mRunning Sphinx v3.1.0+/752d3285d\u001b[39;49;00m\n\u001b[01mloading pickled environment... \u001b[39;49;00mdone\n[autosummary] generating autosummary for: dummy_module.rst, generated/sphinx.application.Sphinx.rst, index.rst, sphinx.rst, underscore_module_.rst\n\u001b[01mbuilding [latex]: \u001b[39;49;00mall source files\n\u001b[01mupdating environment: \u001b[39;49;00m0 added, 0 changed, 0 removed\n\u001b[01mlooking for now-outdated files... \u001b[39;49;00mnone found\n\u001b[01mprocessing python.tex... \u001b[39;49;00m\u001b[32mindex\u001b[39;49;00m \u001b[32mdummy_module\u001b[39;49;00m \u001b[32munderscore_module_\u001b[39;49;00m \u001b[32msphinx\u001b[39;49;00m \u001b[32mgenerated/sphinx.application.Sphinx\u001b[39;49;00m \nresolving references...\ndone\n\u001b[01mwriting... \u001b[39;49;00mdone\n\u001b[01mcopying TeX support files... \u001b[39;49;00m\u001b[01mcopying TeX support files...\u001b[39;49;00m\ndone\n\n\u001b[91mWARNING: while setting up extension sphinx.addnodes: node class 'meta' is already registered, its visitors will be overridden\u001b[39;49;00m\n\n--------------------------- Captured stdout teardown ---------------------------\n# testroot: root\n# builder: latex\n# srcdir: /tmp/pytest-of-root/pytest-0/autosummary\n# outdir: /tmp/pytest-of-root/pytest-0/autosummary/_build/latex\n# status: \n\u001b[01mRunning Sphinx v3.1.0+/752d3285d\u001b[39;49;00m\n\u001b[01mloading pickled environment... \u001b[39;49;00mdone\n[autosummary] generating autosummary for: dummy_module.rst, generated/sphinx.application.Sphinx.rst, index.rst, sphinx.rst, underscore_module_.rst\n\u001b[01mbuilding [latex]: \u001b[39;49;00mall source files\n\u001b[01mupdating environment: \u001b[39;49;00m0 added, 0 changed, 0 removed\n\u001b[01mlooking for now-outdated files... \u001b[39;49;00mnone found\n\u001b[01mprocessing python.tex... \u001b[39;49;00m\u001b[32mindex\u001b[39;49;00m \u001b[32mdummy_module\u001b[39;49;00m \u001b[32munderscore_module_\u001b[39;49;00m \u001b[32msphinx\u001b[39;49;00m \u001b[32mgenerated/sphinx.application.Sphinx\u001b[39;49;00m \nresolving references...\ndone\n\u001b[01mwriting... \u001b[39;49;00mdone\n\u001b[01mcopying TeX support files... \u001b[39;49;00m\u001b[01mcopying TeX support files...\u001b[39;49;00m\ndone\n\n# warning: \n\u001b[91mWARNING: while setting up extension sphinx.addnodes: node class 'meta' is already registered, its visitors will be overridden\u001b[39;49;00m\n\n--------------------------- Captured stdout teardown ---------------------------\n# testroot: root\n# builder: dummy\n# srcdir: /tmp/pytest-of-root/pytest-0/ext-autosummary-imported_members\n# outdir: /tmp/pytest-of-root/pytest-0/ext-autosummary-imported_members/_build/dummy\n# status: \n\u001b[01mRunning Sphinx v3.1.0+/752d3285d\u001b[39;49;00m\n[autosummary] generating autosummary for: index.rst\n[autosummary] generating autosummary for: /tmp/pytest-of-root/pytest-0/ext-autosummary-imported_members/generated/autosummary_dummy_package.rst\n\u001b[01mbuilding [mo]: \u001b[39;49;00mtargets for 0 po files that are out of date\n\u001b[01mbuilding [dummy]: \u001b[39;49;00mtargets for 1 source files that are out of date\n\u001b[01mupdating environment: \u001b[39;49;00m[new config] 2 added, 0 changed, 0 removed\n\u001b[01mreading sources... \u001b[39;49;00m[ 50%] \u001b[35mgenerated/autosummary_dummy_package\u001b[39;49;00m                  \n\u001b[01mreading sources... \u001b[39;49;00m[100%] \u001b[35mindex\u001b[39;49;00m                                                \n\u001b[01mlooking for now-outdated files... \u001b[39;49;00mnone found\n\u001b[01mpickling environment... \u001b[39;49;00mdone\n\u001b[01mchecking consistency... \u001b[39;49;00mdone\n\u001b[01mpreparing documents... \u001b[39;49;00mdone\n\u001b[01mwriting output... \u001b[39;49;00m[ 50%] \u001b[32mgenerated/autosummary_dummy_package\u001b[39;49;00m                   \n\u001b[01mwriting output... \u001b[39;49;00m[100%] \u001b[32mindex\u001b[39;49;00m                                                 \n\u001b[01mbuild succeeded, 1 warning.\u001b[39;49;00m\n\nThe dummy builder generates no files.\n\n# warning: \n\u001b[91mWARNING: while setting up extension sphinx.addnodes: node class 'meta' is already registered, its visitors will be overridden\u001b[39;49;00m\n\n--------------------------- Captured stdout teardown ---------------------------\n# testroot: root\n# builder: html\n# srcdir: /tmp/pytest-of-root/pytest-0/ext-autodoc\n# outdir: /tmp/pytest-of-root/pytest-0/ext-autodoc/_build/html\n# status: \n\u001b[01mRunning Sphinx v3.1.0+/752d3285d\u001b[39;49;00m\n[autosummary] generating autosummary for: \n[autosummary] writing to /tmp/pytest-of-root/pytest-0/ext-autodoc\n[autosummary] generating autosummary for: /tmp/pytest-of-root/pytest-0/ext-autodoc/target.methods.Base.prop.rst\n[autosummary] writing to /tmp/pytest-of-root/pytest-0/ext-autodoc\n\n# warning: \n\u001b[91mWARNING: while setting up extension sphinx.addnodes: node class 'meta' is already registered, its visitors will be overridden\u001b[39;49;00m\n\n--------------------------- Captured stdout teardown ---------------------------\n# testroot: root\n# builder: html\n# srcdir: /tmp/pytest-of-root/pytest-0/ext-autosummary-skip-member\n# outdir: /tmp/pytest-of-root/pytest-0/ext-autosummary-skip-member/_build/html\n# status: \n\u001b[01mRunning Sphinx v3.1.0+/752d3285d\u001b[39;49;00m\n[autosummary] generating autosummary for: index.rst\n[autosummary] generating autosummary for: /tmp/pytest-of-root/pytest-0/ext-autosummary-skip-member/generate/target.Foo.rst\n\u001b[01mbuilding [mo]: \u001b[39;49;00mtargets for 0 po files that are out of date\n\u001b[01mbuilding [html]: \u001b[39;49;00mtargets for 1 source files that are out of date\n\u001b[01mupdating environment: \u001b[39;49;00m[new config] 2 added, 0 changed, 0 removed\n\u001b[01mreading sources... \u001b[39;49;00m[ 50%] \u001b[35mgenerate/target.Foo\u001b[39;49;00m                                  \n\u001b[01mreading sources... \u001b[39;49;00m[100%] \u001b[35mindex\u001b[39;49;00m                                                \n\u001b[01mlooking for now-outdated files... \u001b[39;49;00mnone found\n\u001b[01mpickling environment... \u001b[39;49;00mdone\n\u001b[01mchecking consistency... \u001b[39;49;00mdone\n\u001b[01mpreparing documents... \u001b[39;49;00mdone\n\u001b[01mwriting output... \u001b[39;49;00m[ 50%] \u001b[32mgenerate/target.Foo\u001b[39;49;00m                                   \n\u001b[01mwriting output... \u001b[39;49;00m[100%] \u001b[32mindex\u001b[39;49;00m                                                 \n\u001b[01mgenerating indices... \u001b[39;49;00m genindexdone\n\u001b[01mwriting additional pages... \u001b[39;49;00m searchdone\n\u001b[01mcopying static files... ... \u001b[39;49;00mdone\n\u001b[01mcopying extra files... \u001b[39;49;00mdone\n\u001b[01mdumping search index in English (code: en)... \u001b[39;49;00mdone\n\u001b[01mdumping object inventory... \u001b[39;49;00mdone\n\u001b[01mbuild succeeded, 1 warning.\u001b[39;49;00m\n\nThe HTML pages are in ../tmp/pytest-of-root/pytest-0/ext-autosummary-skip-member/_build/html.\n\n# warning: \n\u001b[91mWARNING: while setting up extension sphinx.addnodes: node class 'meta' is already registered, its visitors will be overridden\u001b[39;49;00m\n\n--------------------------- Captured stdout teardown ---------------------------\n# testroot: root\n# builder: html\n# srcdir: /tmp/pytest-of-root/pytest-0/ext-autosummary-template\n# outdir: /tmp/pytest-of-root/pytest-0/ext-autosummary-template/_build/html\n# status: \n\u001b[01mRunning Sphinx v3.1.0+/752d3285d\u001b[39;49;00m\n[autosummary] generating autosummary for: index.rst\n[autosummary] generating autosummary for: /tmp/pytest-of-root/pytest-0/ext-autosummary-template/generate/target.Foo.rst\n\u001b[01mbuilding [mo]: \u001b[39;49;00mtargets for 0 po files that are out of date\n\u001b[01mbuilding [html]: \u001b[39;49;00mtargets for 1 source files that are out of date\n\u001b[01mupdating environment: \u001b[39;49;00m[new config] 2 added, 0 changed, 0 removed\n\u001b[01mreading sources... \u001b[39;49;00m[ 50%] \u001b[35mgenerate/target.Foo\u001b[39;49;00m                                  \n\u001b[01mreading sources... \u001b[39;49;00m[100%] \u001b[35mindex\u001b[39;49;00m                                                \n\u001b[01mlooking for now-outdated files... \u001b[39;49;00mnone found\n\u001b[01mpickling environment... \u001b[39;49;00mdone\n\u001b[01mchecking consistency... \u001b[39;49;00mdone\n\u001b[01mpreparing documents... \u001b[39;49;00mdone\n\u001b[01mwriting output... \u001b[39;49;00m[ 50%] \u001b[32mgenerate/target.Foo\u001b[39;49;00m                                   \n\u001b[01mwriting output... \u001b[39;49;00m[100%] \u001b[32mindex\u001b[39;49;00m                                                 \n\u001b[01mgenerating indices... \u001b[39;49;00m genindexdone\n\u001b[01mwriting additional pages... \u001b[39;49;00m searchdone\n\u001b[01mcopying static files... ... \u001b[39;49;00mdone\n\u001b[01mcopying extra files... \u001b[39;49;00mdone\n\u001b[01mdumping search index in English (code: en)... \u001b[39;49;00mdone\n\u001b[01mdumping object inventory... \u001b[39;49;00mdone\n\u001b[01mbuild succeeded, 6 warnings.\u001b[39;49;00m\n\nThe HTML pages are in ../tmp/pytest-of-root/pytest-0/ext-autosummary-template/_build/html.\n\n# warning: \n\u001b[91mWARNING: while setting up extension sphinx.addnodes: node class 'meta' is already registered, its visitors will be overridden\u001b[39;49;00m\n\u001b[91m/tmp/pytest-of-root/pytest-0/ext-autosummary-template/index.rst:5:<autosummary>:: WARNING: toctree contains reference to document 'generate/target.Foo' that doesn't have a title: no link will be generated\u001b[39;49;00m\n\u001b[91m/tmp/pytest-of-root/pytest-0/ext-autosummary-template/index.rst:5:<autosummary>:: WARNING: toctree contains reference to document 'generate/target.Foo' that doesn't have a title: no link will be generated\u001b[39;49;00m\n\u001b[91m/tmp/pytest-of-root/pytest-0/ext-autosummary-template/index.rst:5:<autosummary>:: WARNING: toctree contains reference to document 'generate/target.Foo' that doesn't have a title: no link will be generated\u001b[39;49;00m\n\u001b[91m/tmp/pytest-of-root/pytest-0/ext-autosummary-template/index.rst:5:<autosummary>:: WARNING: toctree contains reference to document 'generate/target.Foo' that doesn't have a title: no link will be generated\u001b[39;49;00m\n\u001b[91m/tmp/pytest-of-root/pytest-0/ext-autosummary-template/index.rst:5:<autosummary>:: WARNING: toctree contains reference to document 'generate/target.Foo' that doesn't have a title: no link will be generated\u001b[39;49;00m\n\n--------------------------- Captured stdout teardown ---------------------------\n# testroot: root\n# builder: dummy\n# srcdir: /tmp/pytest-of-root/pytest-0/ext-autosummary\n# outdir: /tmp/pytest-of-root/pytest-0/ext-autosummary/_build/dummy\n# status: \n\u001b[01mRunning Sphinx v3.1.0+/752d3285d\u001b[39;49;00m\n\u001b[01mloading pickled environment... \u001b[39;49;00mdone\n\u001b[01mbuilding [mo]: \u001b[39;49;00mtargets for 0 po files that are out of date\n\u001b[01mbuilding [dummy]: \u001b[39;49;00mtargets for 6 source files that are out of date\n\u001b[01mupdating environment: \u001b[39;49;00m[config changed ('autosummary_generate')] 6 added, 0 changed, 0 removed\n\u001b[01mreading sources... \u001b[39;49;00m[ 16%] \u001b[35mgenerated/autosummary_dummy_module\u001b[39;49;00m                   \n\u001b[01mreading sources... \u001b[39;49;00m[ 33%] \u001b[35mgenerated/autosummary_dummy_module.Foo\u001b[39;49;00m               \n\u001b[01mreading sources... \u001b[39;49;00m[ 50%] \u001b[35mgenerated/autosummary_dummy_module.Foo.Bar\u001b[39;49;00m           \n\u001b[01mreading sources... \u001b[39;49;00m[ 66%] \u001b[35mgenerated/autosummary_dummy_module.bar\u001b[39;49;00m               \n\u001b[01mreading sources... \u001b[39;49;00m[ 83%] \u001b[35mgenerated/autosummary_dummy_module.qux\u001b[39;49;00m               \n\u001b[01mreading sources... \u001b[39;49;00m[100%] \u001b[35mindex\u001b[39;49;00m                                                \n\u001b[01mlooking for now-outdated files... \u001b[39;49;00mnone found\n\u001b[01mpickling environment... \u001b[39;49;00mdone\n\u001b[01mchecking consistency... \u001b[39;49;00mdone\n\u001b[01mpreparing documents... \u001b[39;49;00mdone\n\u001b[01mwriting output... \u001b[39;49;00m[ 16%] \u001b[32mgenerated/autosummary_dummy_module\u001b[39;49;00m                    \n\u001b[01mwriting output... \u001b[39;49;00m[ 33%] \u001b[32mgenerated/autosummary_dummy_module.Foo\u001b[39;49;00m                \n\u001b[01mwriting output... \u001b[39;49;00m[ 50%] \u001b[32mgenerated/autosummary_dummy_module.Foo.Bar\u001b[39;49;00m            \n\u001b[01mwriting output... \u001b[39;49;00m[ 66%] \u001b[32mgenerated/autosummary_dummy_module.bar\u001b[39;49;00m                \n\u001b[01mwriting output... \u001b[39;49;00m[ 83%] \u001b[32mgenerated/autosummary_dummy_module.qux\u001b[39;49;00m                \n\u001b[01mwriting output... \u001b[39;49;00m[100%] \u001b[32mindex\u001b[39;49;00m                                                 \n\u001b[01mbuild succeeded, 3 warnings.\u001b[39;49;00m\n\nThe dummy builder generates no files.\n\n# warning: \n\u001b[91mWARNING: while setting up extension sphinx.addnodes: node class 'meta' is already registered, its visitors will be overridden\u001b[39;49;00m\n\u001b[91mWARNING: don't know which module to import for autodocumenting 'Foo.Bar' (try placing a \"module\" or \"currentmodule\" directive in the document, or giving an explicit module name)\u001b[39;49;00m\n\u001b[91mWARNING: autosummary: failed to import autosummary_importfail\u001b[39;49;00m\n\n--------------------------- Captured stdout teardown ---------------------------\n# testroot: root\n# builder: dummy\n# srcdir: /tmp/pytest-of-root/pytest-0/ext-autosummary\n# outdir: /tmp/pytest-of-root/pytest-0/ext-autosummary/_build/dummy\n# status: \n\u001b[01mRunning Sphinx v3.1.0+/752d3285d\u001b[39;49;00m\n\u001b[01mloading pickled environment... \u001b[39;49;00mdone\n\n# warning: \n\u001b[91mWARNING: while setting up extension sphinx.addnodes: node class 'meta' is already registered, its visitors will be overridden\u001b[39;49;00m\n\u001b[91mWARNING: autosummary_generate: file not found: unknown.rst\u001b[39;49;00m\n\n_________________________________ test_autogen _________________________________\n----------------------------- Captured stdout call -----------------------------\n[autosummary] generating autosummary for: autosummary_templating.txt\n[autosummary] writing to /tmp/pytest-of-root/pytest-0/test_autogen0\n[autosummary] generating autosummary for: /tmp/pytest-of-root/pytest-0/test_autogen0/sphinx.application.TemplateBridge.rst\n[autosummary] writing to /tmp/pytest-of-root/pytest-0/test_autogen0\n============================= slowest 25 durations =============================\n0.59s call     tests/test_ext_autosummary.py::test_get_items_summary\n0.15s call     tests/test_ext_autosummary.py::test_autosummary_skip_member\n0.12s call     tests/test_ext_autosummary.py::test_autosummary_template\n0.11s setup    tests/test_ext_autosummary.py::test_autosummary_recursive\n0.10s call     tests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\n0.09s call     tests/test_ext_autosummary.py::test_empty_autosummary_generate\n0.08s setup    tests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\n0.06s call     tests/test_ext_autosummary.py::test_autosummary_generate\n0.05s setup    tests/test_ext_autosummary.py::test_autosummary_generate_content_for_module\n0.04s call     tests/test_ext_autosummary.py::test_autosummary_recursive\n0.04s setup    tests/test_ext_autosummary.py::test_escaping\n0.03s setup    tests/test_ext_autosummary.py::test_autosummary_generate_content_for_module_imported_members\n0.03s call     tests/test_ext_autosummary.py::test_autosummary_generate_overwrite2\n0.03s setup    tests/test_ext_autosummary.py::test_generate_autosummary_docs_property\n0.03s setup    tests/test_ext_autosummary.py::test_autosummary_generate_content_for_module_skipped\n0.03s call     tests/test_ext_autosummary.py::test_autosummary_generate_overwrite1\n0.03s setup    tests/test_ext_autosummary.py::test_autosummary_generate\n0.03s call     tests/test_ext_autosummary.py::test_escaping\n0.02s setup    tests/test_ext_autosummary.py::test_autosummary_skip_member\n0.02s setup    tests/test_ext_autosummary.py::test_autosummary_imported_members\n0.02s setup    tests/test_ext_autosummary.py::test_autosummary_template\n0.02s setup    tests/test_ext_autosummary.py::test_autosummary_mock_imports\n0.02s call     tests/test_ext_autosummary.py::test_autosummary_imported_members\n0.02s call     tests/test_ext_autosummary.py::test_autosummary_mock_imports\n0.01s setup    tests/test_ext_autosummary.py::test_empty_autosummary_generate\n=========================== short test summary info ============================\nPASSED tests/test_ext_autosummary.py::test_mangle_signature\nPASSED tests/test_ext_autosummary.py::test_escaping\nPASSED tests/test_ext_autosummary.py::test_autosummary_generate_content_for_module\nPASSED tests/test_ext_autosummary.py::test_autosummary_generate_content_for_module_skipped\nPASSED tests/test_ext_autosummary.py::test_autosummary_generate\nPASSED tests/test_ext_autosummary.py::test_autosummary_generate_overwrite1\nPASSED tests/test_ext_autosummary.py::test_autosummary_generate_overwrite2\nPASSED tests/test_ext_autosummary.py::test_autosummary_recursive\nPASSED tests/test_ext_autosummary.py::test_autosummary_latex_table_colspec\nPASSED tests/test_ext_autosummary.py::test_import_by_name\nPASSED tests/test_ext_autosummary.py::test_autosummary_imported_members\nPASSED tests/test_ext_autosummary.py::test_generate_autosummary_docs_property\nPASSED tests/test_ext_autosummary.py::test_autosummary_skip_member\nPASSED tests/test_ext_autosummary.py::test_autosummary_template\nPASSED tests/test_ext_autosummary.py::test_empty_autosummary_generate\nPASSED tests/test_ext_autosummary.py::test_invalid_autosummary_generate\nPASSED tests/test_ext_autosummary.py::test_autogen\nFAILED tests/test_ext_autosummary.py::test_extract_summary - ValueError: Empt...\nFAILED tests/test_ext_autosummary.py::test_get_items_summary - AssertionError...\nFAILED tests/test_ext_autosummary.py::test_autosummary_generate_content_for_module_imported_members\nFAILED tests/test_ext_autosummary.py::test_autosummary_mock_imports - Asserti...\n================= 4 failed, 17 passed, 1720 warnings in 2.18s ==================\npy39: exit 1 (2.83 seconds) /testbed> pytest -rA --durations 25 tests/roots/test-ext-autosummary/autosummary_dummy_module.py tests/test_ext_autosummary.py pid=1238\n  py39: FAIL code 1 (2.84=setup[0.01]+cmd[2.83] seconds)\n  evaluation failed :( (2.96 seconds)\n", {"tests/test_ext_autosummary.py::test_mangle_signature": "PASSED", "tests/test_ext_autosummary.py::test_escaping": "PASSED", "tests/test_ext_autosummary.py::test_autosummary_generate_content_for_module": "PASSED", "tests/test_ext_autosummary.py::test_autosummary_generate_content_for_module_skipped": "PASSED", "tests/test_ext_autosummary.py::test_autosummary_generate": "PASSED", "tests/test_ext_autosummary.py::test_autosummary_generate_overwrite1": "PASSED", "tests/test_ext_autosummary.py::test_autosummary_generate_overwrite2": "PASSED", "tests/test_ext_autosummary.py::test_autosummary_recursive": "PASSED", "tests/test_ext_autosummary.py::test_autosummary_latex_table_colspec": "PASSED", "tests/test_ext_autosummary.py::test_import_by_name": "PASSED", "tests/test_ext_autosummary.py::test_autosummary_imported_members": "PASSED", "tests/test_ext_autosummary.py::test_generate_autosummary_docs_property": "PASSED", "tests/test_ext_autosummary.py::test_autosummary_skip_member": "PASSED", "tests/test_ext_autosummary.py::test_autosummary_template": "PASSED", "tests/test_ext_autosummary.py::test_empty_autosummary_generate": "PASSED", "tests/test_ext_autosummary.py::test_invalid_autosummary_generate": "PASSED", "tests/test_ext_autosummary.py::test_autogen": "PASSED", "tests/test_ext_autosummary.py::test_extract_summary": "FAILED", "tests/test_ext_autosummary.py::test_get_items_summary": "FAILED", "tests/test_ext_autosummary.py::test_autosummary_generate_content_for_module_imported_members": "FAILED", "tests/test_ext_autosummary.py::test_autosummary_mock_imports": "FAILED"}]