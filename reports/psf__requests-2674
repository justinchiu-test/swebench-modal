[{"repo": "psf/requests", "instance_id": "psf__requests-2674", "base_commit": "0be38a0c37c59c4b66ce908731da15b401655113", "patch": "diff --git a/requests/adapters.py b/requests/adapters.py\n--- a/requests/adapters.py\n+++ b/requests/adapters.py\n@@ -19,6 +19,7 @@\n from .utils import (DEFAULT_CA_BUNDLE_PATH, get_encoding_from_headers,\n                     prepend_scheme_if_needed, get_auth_from_url, urldefragauth)\n from .structures import CaseInsensitiveDict\n+from .packages.urllib3.exceptions import ClosedPoolError\n from .packages.urllib3.exceptions import ConnectTimeoutError\n from .packages.urllib3.exceptions import HTTPError as _HTTPError\n from .packages.urllib3.exceptions import MaxRetryError\n@@ -421,6 +422,9 @@ def send(self, request, stream=False, timeout=None, verify=True, cert=None, prox\n \n             raise ConnectionError(e, request=request)\n \n+        except ClosedPoolError as e:\n+            raise ConnectionError(e, request=request)\n+\n         except _ProxyError as e:\n             raise ProxyError(e)\n \n", "test_patch": "diff --git a/test_requests.py b/test_requests.py\n--- a/test_requests.py\n+++ b/test_requests.py\n@@ -1655,6 +1655,16 @@ def test_urllib3_retries():\n     with pytest.raises(RetryError):\n         s.get(httpbin('status/500'))\n \n+\n+def test_urllib3_pool_connection_closed():\n+    s = requests.Session()\n+    s.mount('http://', HTTPAdapter(pool_connections=0, pool_maxsize=0))\n+\n+    try:\n+        s.get(httpbin('status/200'))\n+    except ConnectionError as e:\n+        assert u\"HTTPConnectionPool(host='httpbin.org', port=80): Pool is closed.\" in str(e.message)\n+\n def test_vendor_aliases():\n     from requests.packages import urllib3\n     from requests.packages import chardet\n", "problem_statement": "urllib3 exceptions passing through requests API\nI don't know if it's a design goal of requests to hide urllib3's exceptions and wrap them around requests.exceptions types.\n\n(If it's not IMHO it should be, but that's another discussion)\n\nIf it is, I have at least two of them passing through that I have to catch in addition to requests' exceptions. They are requests.packages.urllib3.exceptions.DecodeError and requests.packages.urllib3.exceptions.TimeoutError (this one I get when a proxy timeouts)\n\nThanks!\n\n", "hints_text": "I definitely agree with you and would agree that these should be wrapped.\n\nCould you give us stack-traces so we can find where they're bleeding through?\n\nSorry I don't have stack traces readily available :/\n\nNo worries. I have ideas as to where the DecodeError might be coming from but I'm not certain where the TimeoutError could be coming from.\n\nIf you run into them again, please save us the stack traces. =) Thanks for reporting them. (We'll never know what we're missing until someone tells us.)\n\n`TimeoutError` is almost certainly being raised from either [`HTTPConnectionPool.urlopen()`](https://github.com/kennethreitz/requests/blob/master/requests/adapters.py#L282-L293) or from [`HTTPConnection.putrequest()`](https://github.com/kennethreitz/requests/blob/master/requests/adapters.py#L301). Adding a new clause to [here](https://github.com/kennethreitz/requests/blob/master/requests/adapters.py#L323-L335) should cover us.\n\nActually, that can't be right, we should be catching and rethrowing as a Requests `Timeout` exception in that block. Hmm, I'll do another spin through the code to see if I can see the problem.\n\nYeah, a quick search of the `urllib3` code reveals that the only place that `TimeoutError`s are thrown is from `HTTPConnectionPool.urlopen()`. These should not be leaking. We really need a stack trace to track this down.\n\nI've added a few logs to get the traces if they happen again. What may have confused me for the TimeoutError is that requests' Timeout actually wraps the urllib3's TimeoutError and we were logging the content of the error as well. \n\nSo DecodeError was definitely being thrown but probably not TimeoutError, sorry for the confusion. I'll report here it I ever see it happening now that we're watching for it.\n\nThanks for the help!\n\nI also got urllib3 exceptions passing through when use Session in several threads, trace:\n\n```\n......\n  File \"C:\\Python27\\lib\\site-packages\\requests\\sessions.py\", line 347, in get\n    return self.request('GET', url, **kwargs)\n  File \"C:\\Python27\\lib\\site-packages\\requests\\sessions.py\", line 335, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Python27\\lib\\site-packages\\requests\\sessions.py\", line 438, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Python27\\lib\\site-packages\\requests\\adapters.py\", line 292, in send\n    timeout=timeout\n  File \"C:\\Python27\\lib\\site-packages\\requests\\packages\\urllib3\\connectionpool.py\", line 423, in url\nopen\n    conn = self._get_conn(timeout=pool_timeout)\n  File \"C:\\Python27\\lib\\site-packages\\requests\\packages\\urllib3\\connectionpool.py\", line 224, in _ge\nt_conn\n    raise ClosedPoolError(self, \"Pool is closed.\")\nClosedPoolError: HTTPConnectionPool(host='......', port=80): Pool is closed.\n```\n\nAh, we should rewrap that `ClosedPoolError` too.\n\nBut it's still the summer... How can any pool be closed? :smirk_cat: \n\nBut yes :+1:\n\nI've added a fix for the `ClosedPoolError` to #1475. Which apparently broke in the last month for no adequately understandable reason.\n\nIf it's still needed, here is the traceback of DecodeError I got using proxy on requests 2.0.0:\n\n```\nTraceback (most recent call last):\n  File \"/home/krat/Projects/Grubhub/source/Pit/pit/web.py\", line 52, in request\n    response = session.request(method, url, **kw)\n  File \"/home/krat/.virtualenvs/grubhub/local/lib/python2.7/site-packages/requests/sessions.py\", line 357, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"/home/krat/.virtualenvs/grubhub/local/lib/python2.7/site-packages/requests/sessions.py\", line 460, in send\n    r = adapter.send(request, **kwargs)\n  File \"/home/krat/.virtualenvs/grubhub/local/lib/python2.7/site-packages/requests/adapters.py\", line 367, in send\n    r.content\n  File \"/home/krat/.virtualenvs/grubhub/local/lib/python2.7/site-packages/requests/models.py\", line 633, in content\n    self._content = bytes().join(self.iter_content(CONTENT_CHUNK_SIZE)) or bytes()\n  File \"/home/krat/.virtualenvs/grubhub/local/lib/python2.7/site-packages/requests/models.py\", line 572, in generate\n    decode_content=True):\n  File \"/home/krat/.virtualenvs/grubhub/local/lib/python2.7/site-packages/requests/packages/urllib3/response.py\", line 225, in stream\n    data = self.read(amt=amt, decode_content=decode_content)\n  File \"/home/krat/.virtualenvs/grubhub/local/lib/python2.7/site-packages/requests/packages/urllib3/response.py\", line 193, in read\n    e)\nDecodeError: ('Received response with content-encoding: gzip, but failed to decode it.', error('Error -3 while decompressing: incorrect header check',))\n```\n\nSlightly different to the above, but urllib3's LocationParseError leaks through which could probably do with being wrapped in InvalidURL.\n\n```\nTraceback (most recent call last):\n  File \"/home/oliver/wc/trunk/mtmCore/python/asagent/samplers/net/web.py\", line 255, in process_url\n    resp = self.request(self.params.httpverb, url, data=data)\n  File \"/home/oliver/wc/trunk/mtmCore/python/asagent/samplers/net/web.py\", line 320, in request\n    verb, url, data=data))\n  File \"abilisoft/requests/opt/abilisoft.com/thirdparty/requests/lib/python2.7/site-packages/requests/sessions.py\", line 286, in prepare_request\n  File \"abilisoft/requests/opt/abilisoft.com/thirdparty/requests/lib/python2.7/site-packages/requests/models.py\", line 286, in prepare\n  File \"abilisoft/requests/opt/abilisoft.com/thirdparty/requests/lib/python2.7/site-packages/requests/models.py\", line 333, in prepare_url\n  File \"abilisoft/requests/opt/abilisoft.com/thirdparty/requests/lib/python2.7/site-packages/requests/packages/urllib3/util.py\", line 397, in parse_url\nLocationParseError: Failed to parse: Failed to parse: fe80::5054:ff:fe5a:fc0\n```\n", "created_at": "2015-07-17T08:33:52Z", "version": "2.7", "FAIL_TO_PASS": "[\"test_requests.py::RequestsTestCase::test_BASICAUTH_TUPLE_HTTP_200_OK_GET\", \"test_requests.py::RequestsTestCase::test_HTTP_200_OK_GET_ALTERNATIVE\", \"test_requests.py::RequestsTestCase::test_HTTP_200_OK_GET_WITH_PARAMS\", \"test_requests.py::RequestsTestCase::test_HTTP_200_OK_HEAD\", \"test_requests.py::RequestsTestCase::test_auth_is_retained_for_redirect_on_host\", \"test_requests.py::RequestsTestCase::test_different_encodings_dont_break_post\", \"test_requests.py::RequestsTestCase::test_manual_redirect_with_partial_body_read\", \"test_requests.py::RequestsTestCase::test_mixed_case_scheme_acceptable\", \"test_requests.py::RequestsTestCase::test_prepared_from_session\", \"test_requests.py::RequestsTestCase::test_unicode_multipart_post\", \"test_requests.py::TestTimeout::test_none_timeout\", \"test_requests.py::TestTimeout::test_encoded_methods\"]", "PASS_TO_PASS": "[\"test_requests.py::RequestsTestCase::test_DIGESTAUTH_QUOTES_QOP_VALUE\", \"test_requests.py::RequestsTestCase::test_DIGESTAUTH_WRONG_HTTP_401_GET\", \"test_requests.py::RequestsTestCase::test_DIGEST_AUTH_RETURNS_COOKIE\", \"test_requests.py::RequestsTestCase::test_DIGEST_AUTH_SETS_SESSION_COOKIES\", \"test_requests.py::RequestsTestCase::test_DIGEST_STREAM\", \"test_requests.py::RequestsTestCase::test_HTTP_200_OK_GET_WITH_MIXED_PARAMS\", \"test_requests.py::RequestsTestCase::test_HTTP_200_OK_PUT\", \"test_requests.py::RequestsTestCase::test_LocationParseError\", \"test_requests.py::RequestsTestCase::test_POSTBIN_GET_POST_FILES\", \"test_requests.py::RequestsTestCase::test_POSTBIN_GET_POST_FILES_WITH_DATA\", \"test_requests.py::RequestsTestCase::test_auth_is_stripped_on_redirect_off_host\", \"test_requests.py::RequestsTestCase::test_autoset_header_values_are_native\", \"test_requests.py::RequestsTestCase::test_basic_auth_str_is_always_native\", \"test_requests.py::RequestsTestCase::test_basic_building\", \"test_requests.py::RequestsTestCase::test_basicauth_with_netrc\", \"test_requests.py::RequestsTestCase::test_can_send_bytes_bytearray_objects_with_files\", \"test_requests.py::RequestsTestCase::test_can_send_file_object_with_non_string_filename\", \"test_requests.py::RequestsTestCase::test_can_send_nonstring_objects_with_files\", \"test_requests.py::RequestsTestCase::test_cannot_send_unprepared_requests\", \"test_requests.py::RequestsTestCase::test_connection_error_invalid_domain\", \"test_requests.py::RequestsTestCase::test_connection_error_invalid_port\", \"test_requests.py::RequestsTestCase::test_cookie_as_dict_items\", \"test_requests.py::RequestsTestCase::test_cookie_as_dict_keeps_items\", \"test_requests.py::RequestsTestCase::test_cookie_as_dict_keeps_len\", \"test_requests.py::RequestsTestCase::test_cookie_as_dict_keys\", \"test_requests.py::RequestsTestCase::test_cookie_as_dict_values\", \"test_requests.py::RequestsTestCase::test_cookie_parameters\", \"test_requests.py::RequestsTestCase::test_cookie_persists_via_api\", \"test_requests.py::RequestsTestCase::test_cookie_quote_wrapped\", \"test_requests.py::RequestsTestCase::test_cookie_removed_on_expire\", \"test_requests.py::RequestsTestCase::test_custom_content_type\", \"test_requests.py::RequestsTestCase::test_decompress_gzip\", \"test_requests.py::RequestsTestCase::test_entry_points\", \"test_requests.py::RequestsTestCase::test_fixes_1329\", \"test_requests.py::RequestsTestCase::test_generic_cookiejar_works\", \"test_requests.py::RequestsTestCase::test_get_auth_from_url\", \"test_requests.py::RequestsTestCase::test_get_auth_from_url_encoded_hashes\", \"test_requests.py::RequestsTestCase::test_get_auth_from_url_encoded_spaces\", \"test_requests.py::RequestsTestCase::test_get_auth_from_url_not_encoded_spaces\", \"test_requests.py::RequestsTestCase::test_get_auth_from_url_percent_chars\", \"test_requests.py::RequestsTestCase::test_header_keys_are_native\", \"test_requests.py::RequestsTestCase::test_header_remove_is_case_insensitive\", \"test_requests.py::RequestsTestCase::test_headers_on_session_with_None_are_not_sent\", \"test_requests.py::RequestsTestCase::test_history_is_always_a_list\", \"test_requests.py::RequestsTestCase::test_hook_receives_request_arguments\", \"test_requests.py::RequestsTestCase::test_http_error\", \"test_requests.py::RequestsTestCase::test_invalid_url\", \"test_requests.py::RequestsTestCase::test_json_param_post_content_type_works\", \"test_requests.py::RequestsTestCase::test_links\", \"test_requests.py::RequestsTestCase::test_long_authinfo_in_url\", \"test_requests.py::RequestsTestCase::test_no_content_length\", \"test_requests.py::RequestsTestCase::test_nonhttp_schemes_dont_check_URLs\", \"test_requests.py::RequestsTestCase::test_override_content_length\", \"test_requests.py::RequestsTestCase::test_params_are_added_before_fragment\", \"test_requests.py::RequestsTestCase::test_params_are_merged_case_sensitive\", \"test_requests.py::RequestsTestCase::test_path_is_not_double_encoded\", \"test_requests.py::RequestsTestCase::test_prepare_request_with_bytestring_url\", \"test_requests.py::RequestsTestCase::test_prepared_request_hook\", \"test_requests.py::RequestsTestCase::test_pyopenssl_redirect\", \"test_requests.py::RequestsTestCase::test_redirect_with_wrong_gzipped_header\", \"test_requests.py::RequestsTestCase::test_request_and_response_are_pickleable\", \"test_requests.py::RequestsTestCase::test_request_cookie_overrides_session_cookie\", \"test_requests.py::RequestsTestCase::test_request_cookies_not_persisted\", \"test_requests.py::RequestsTestCase::test_request_ok_set\", \"test_requests.py::RequestsTestCase::test_requests_in_history_are_not_overridden\", \"test_requests.py::RequestsTestCase::test_response_decode_unicode\", \"test_requests.py::RequestsTestCase::test_response_is_iterable\", \"test_requests.py::RequestsTestCase::test_response_iter_lines\", \"test_requests.py::RequestsTestCase::test_session_hooks_are_overriden_by_request_hooks\", \"test_requests.py::RequestsTestCase::test_session_hooks_are_used_with_no_request_hooks\", \"test_requests.py::RequestsTestCase::test_session_pickling\", \"test_requests.py::RequestsTestCase::test_set_cookie_on_301\", \"test_requests.py::RequestsTestCase::test_status_raising\", \"test_requests.py::RequestsTestCase::test_time_elapsed_blank\", \"test_requests.py::RequestsTestCase::test_transport_adapter_ordering\", \"test_requests.py::RequestsTestCase::test_unconsumed_session_response_closes_connection\", \"test_requests.py::RequestsTestCase::test_unicode_get\", \"test_requests.py::RequestsTestCase::test_unicode_header_name\", \"test_requests.py::RequestsTestCase::test_unicode_method_name\", \"test_requests.py::RequestsTestCase::test_unicode_multipart_post_fieldnames\", \"test_requests.py::RequestsTestCase::test_uppercase_scheme_redirect\", \"test_requests.py::RequestsTestCase::test_urlencoded_get_query_multivalued_param\", \"test_requests.py::RequestsTestCase::test_user_agent_transfers\", \"test_requests.py::TestContentEncodingDetection::test_html4_pragma\", \"test_requests.py::TestContentEncodingDetection::test_html_charset\", \"test_requests.py::TestContentEncodingDetection::test_none\", \"test_requests.py::TestContentEncodingDetection::test_precedence\", \"test_requests.py::TestContentEncodingDetection::test_xhtml_pragma\", \"test_requests.py::TestContentEncodingDetection::test_xml\", \"test_requests.py::TestCaseInsensitiveDict::test_contains\", \"test_requests.py::TestCaseInsensitiveDict::test_copy\", \"test_requests.py::TestCaseInsensitiveDict::test_delitem\", \"test_requests.py::TestCaseInsensitiveDict::test_docstring_example\", \"test_requests.py::TestCaseInsensitiveDict::test_equality\", \"test_requests.py::TestCaseInsensitiveDict::test_fixes_649\", \"test_requests.py::TestCaseInsensitiveDict::test_get\", \"test_requests.py::TestCaseInsensitiveDict::test_getitem\", \"test_requests.py::TestCaseInsensitiveDict::test_iter\", \"test_requests.py::TestCaseInsensitiveDict::test_iterable_init\", \"test_requests.py::TestCaseInsensitiveDict::test_kwargs_init\", \"test_requests.py::TestCaseInsensitiveDict::test_len\", \"test_requests.py::TestCaseInsensitiveDict::test_lower_items\", \"test_requests.py::TestCaseInsensitiveDict::test_mapping_init\", \"test_requests.py::TestCaseInsensitiveDict::test_preserve_key_case\", \"test_requests.py::TestCaseInsensitiveDict::test_preserve_last_key_case\", \"test_requests.py::TestCaseInsensitiveDict::test_repr\", \"test_requests.py::TestCaseInsensitiveDict::test_setdefault\", \"test_requests.py::TestCaseInsensitiveDict::test_update\", \"test_requests.py::TestCaseInsensitiveDict::test_update_retains_unchanged\", \"test_requests.py::UtilsTestCase::test_address_in_network\", \"test_requests.py::UtilsTestCase::test_dotted_netmask\", \"test_requests.py::UtilsTestCase::test_get_auth_from_url\", \"test_requests.py::UtilsTestCase::test_get_environ_proxies\", \"test_requests.py::UtilsTestCase::test_get_environ_proxies_ip_ranges\", \"test_requests.py::UtilsTestCase::test_guess_filename_when_filename_is_an_int\", \"test_requests.py::UtilsTestCase::test_guess_filename_when_int\", \"test_requests.py::UtilsTestCase::test_guess_filename_with_file_like_obj\", \"test_requests.py::UtilsTestCase::test_guess_filename_with_unicode_name\", \"test_requests.py::UtilsTestCase::test_is_ipv4_address\", \"test_requests.py::UtilsTestCase::test_is_valid_cidr\", \"test_requests.py::UtilsTestCase::test_requote_uri_properly_requotes\", \"test_requests.py::UtilsTestCase::test_requote_uri_with_unquoted_percents\", \"test_requests.py::UtilsTestCase::test_super_len_io_streams\", \"test_requests.py::TestMorselToCookieExpires::test_expires_invalid_int\", \"test_requests.py::TestMorselToCookieExpires::test_expires_invalid_str\", \"test_requests.py::TestMorselToCookieExpires::test_expires_none\", \"test_requests.py::TestMorselToCookieExpires::test_expires_valid_str\", \"test_requests.py::TestMorselToCookieMaxAge::test_max_age_invalid_str\", \"test_requests.py::TestMorselToCookieMaxAge::test_max_age_valid_int\", \"test_requests.py::TestTimeout::test_stream_timeout\", \"test_requests.py::TestTimeout::test_invalid_timeout\", \"test_requests.py::TestTimeout::test_read_timeout\", \"test_requests.py::TestTimeout::test_connect_timeout\", \"test_requests.py::TestTimeout::test_total_timeout_connect\", \"test_requests.py::TestRedirects::test_requests_are_updated_each_time\", \"test_requests.py::test_data_argument_accepts_tuples\", \"test_requests.py::test_prepared_request_empty_copy\", \"test_requests.py::test_prepared_request_no_cookies_copy\", \"test_requests.py::test_prepared_request_complete_copy\", \"test_requests.py::test_prepare_unicode_url\", \"test_requests.py::test_urllib3_retries\", \"test_requests.py::test_vendor_aliases\"]", "environment_setup_commit": "bf436ea0a49513bd4e49bb2d1645bd770e470d75"}, "On branch main\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git restore <file>...\" to discard changes in working directory)\n\tmodified:   requests/adapters.py\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\ncommit 0be38a0c37c59c4b66ce908731da15b401655113\nMerge: 2b26489f beaa7e41\nAuthor: Ian Cordasco <sigmavirus24@users.noreply.github.com>\nDate:   Wed Jul 15 20:51:06 2015 -0500\n\n    Merge pull request #2672 from petedmarsh/fix-custom-headers-example\n    \n    Fix quickstart \"Custom Headers\" example intro\n\ndiff --git a/requests/adapters.py b/requests/adapters.py\nindex 841cbbfe..cf468608 100644\n--- a/requests/adapters.py\n+++ b/requests/adapters.py\n@@ -19,6 +19,7 @@ from .compat import urlparse, basestring\n from .utils import (DEFAULT_CA_BUNDLE_PATH, get_encoding_from_headers,\n                     prepend_scheme_if_needed, get_auth_from_url, urldefragauth)\n from .structures import CaseInsensitiveDict\n+from .packages.urllib3.exceptions import ClosedPoolError\n from .packages.urllib3.exceptions import ConnectTimeoutError\n from .packages.urllib3.exceptions import HTTPError as _HTTPError\n from .packages.urllib3.exceptions import MaxRetryError\n@@ -421,6 +422,9 @@ class HTTPAdapter(BaseAdapter):\n \n             raise ConnectionError(e, request=request)\n \n+        except ClosedPoolError as e:\n+            raise ConnectionError(e, request=request)\n+\n         except _ProxyError as e:\n             raise ProxyError(e)\n \nProcessing /testbed\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nBuilding wheels for collected packages: requests\n  Building wheel for requests (setup.py): started\n  Building wheel for requests (setup.py): finished with status 'done'\n  Created wheel for requests: filename=requests-2.7.0-py2.py3-none-any.whl size=462613 sha256=a4a7261d42a137a7cfe8671666a4c4f9d00b5d48e9ecff1cc1a8ec890afe2c67\n  Stored in directory: /tmp/pip-ephem-wheel-cache-sx6pj3a7/wheels/7d/66/67/70d1ee2124ccf21d601c352e25cdca10f611f7c8b3f9ffb9e4\nSuccessfully built requests\nInstalling collected packages: requests\n  Attempting uninstall: requests\n    Found existing installation: requests 2.7.0\n    Uninstalling requests-2.7.0:\n      Successfully uninstalled requests-2.7.0\nSuccessfully installed requests-2.7.0\n============================= test session starts ==============================\nplatform linux -- Python 3.9.20, pytest-7.4.4, pluggy-1.0.0\nrootdir: /testbed\ncollected 162 items\n\ntest_requests.py ..........................F............................ [ 33%]\n............................X........................................... [ 78%]\n.................................F.                                      [100%]\n\n=================================== FAILURES ===================================\n________________ RequestsTestCase.test_conflicting_post_params _________________\n\nself = <test_requests.RequestsTestCase testMethod=test_conflicting_post_params>\n\n    def test_conflicting_post_params(self):\n        url = httpbin('post')\n        with open('requirements.txt') as f:\n>           pytest.raises(ValueError, \"requests.post(url, data='[{\\\"some\\\": \\\"data\\\"}]', files={'some': f})\")\nE           TypeError: 'requests.post(url, data=\\'[{\"some\": \"data\"}]\\', files={\\'some\\': f})' object (type: <class 'str'>) must be callable\n\ntest_requests.py:455: TypeError\n_____________________ test_urllib3_pool_connection_closed ______________________\n\nself = <requests.packages.urllib3.connectionpool.HTTPConnectionPool object at 0x7f8cf031ad90>\ntimeout = None\n\n    def _get_conn(self, timeout=None):\n        \"\"\"\n        Get a connection. Will return a pooled connection if one is available.\n    \n        If no connections are available and :prop:`.block` is ``False``, then a\n        fresh connection is returned.\n    \n        :param timeout:\n            Seconds to wait before giving up and raising\n            :class:`urllib3.exceptions.EmptyPoolError` if the pool is empty and\n            :prop:`.block` is ``True``.\n        \"\"\"\n        conn = None\n        try:\n>           conn = self.pool.get(block=self.block, timeout=timeout)\nE           AttributeError: 'NoneType' object has no attribute 'get'\n\nrequests/packages/urllib3/connectionpool.py:224: AttributeError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <requests.adapters.HTTPAdapter object at 0x7f8cf031a820>\nrequest = <PreparedRequest [GET]>, stream = False\ntimeout = <requests.packages.urllib3.util.timeout.Timeout object at 0x7f8cf031aa60>\nverify = True, cert = None\nproxies = {'no': '192.168.0.0/24,127.0.0.1,localhost.localdomain,172.16.1.1'}\n\n    def send(self, request, stream=False, timeout=None, verify=True, cert=None, proxies=None):\n        \"\"\"Sends PreparedRequest object. Returns Response object.\n    \n        :param request: The :class:`PreparedRequest <PreparedRequest>` being sent.\n        :param stream: (optional) Whether to stream the request content.\n        :param timeout: (optional) How long to wait for the server to send\n            data before giving up, as a float, or a (`connect timeout, read\n            timeout <user/advanced.html#timeouts>`_) tuple.\n        :type timeout: float or tuple\n        :param verify: (optional) Whether to verify SSL certificates.\n        :param cert: (optional) Any user-provided SSL certificate to be trusted.\n        :param proxies: (optional) The proxies dictionary to apply to the request.\n        \"\"\"\n    \n        conn = self.get_connection(request.url, proxies)\n    \n        self.cert_verify(conn, request.url, verify, cert)\n        url = self.request_url(request, proxies)\n        self.add_headers(request)\n    \n        chunked = not (request.body is None or 'Content-Length' in request.headers)\n    \n        if isinstance(timeout, tuple):\n            try:\n                connect, read = timeout\n                timeout = TimeoutSauce(connect=connect, read=read)\n            except ValueError as e:\n                # this may raise a string formatting error.\n                err = (\"Invalid timeout {0}. Pass a (connect, read) \"\n                       \"timeout tuple, or a single float to set \"\n                       \"both timeouts to the same value\".format(timeout))\n                raise ValueError(err)\n        else:\n            timeout = TimeoutSauce(connect=timeout, read=timeout)\n    \n        try:\n            if not chunked:\n>               resp = conn.urlopen(\n                    method=request.method,\n                    url=url,\n                    body=request.body,\n                    headers=request.headers,\n                    redirect=False,\n                    assert_same_host=False,\n                    preload_content=False,\n                    decode_content=False,\n                    retries=self.max_retries,\n                    timeout=timeout\n                )\n\nrequests/adapters.py:362: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nrequests/packages/urllib3/connectionpool.py:533: in urlopen\n    conn = self._get_conn(timeout=pool_timeout)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <requests.packages.urllib3.connectionpool.HTTPConnectionPool object at 0x7f8cf031ad90>\ntimeout = None\n\n    def _get_conn(self, timeout=None):\n        \"\"\"\n        Get a connection. Will return a pooled connection if one is available.\n    \n        If no connections are available and :prop:`.block` is ``False``, then a\n        fresh connection is returned.\n    \n        :param timeout:\n            Seconds to wait before giving up and raising\n            :class:`urllib3.exceptions.EmptyPoolError` if the pool is empty and\n            :prop:`.block` is ``True``.\n        \"\"\"\n        conn = None\n        try:\n            conn = self.pool.get(block=self.block, timeout=timeout)\n    \n        except AttributeError:  # self.pool is None\n>           raise ClosedPoolError(self, \"Pool is closed.\")\nE           requests.packages.urllib3.exceptions.ClosedPoolError: HTTPConnectionPool(host='httpbin.org', port=80): Pool is closed.\n\nrequests/packages/urllib3/connectionpool.py:227: ClosedPoolError\n\nDuring handling of the above exception, another exception occurred:\n\n    def test_urllib3_pool_connection_closed():\n        s = requests.Session()\n        s.mount('http://', HTTPAdapter(pool_connections=0, pool_maxsize=0))\n    \n        try:\n>           s.get(httpbin('status/200'))\n\ntest_requests.py:1664: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nrequests/sessions.py:477: in get\n    return self.request('GET', url, **kwargs)\nrequests/sessions.py:465: in request\n    resp = self.send(prep, **send_kwargs)\nrequests/sessions.py:573: in send\n    r = adapter.send(request, **kwargs)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <requests.adapters.HTTPAdapter object at 0x7f8cf031a820>\nrequest = <PreparedRequest [GET]>, stream = False\ntimeout = <requests.packages.urllib3.util.timeout.Timeout object at 0x7f8cf031aa60>\nverify = True, cert = None\nproxies = {'no': '192.168.0.0/24,127.0.0.1,localhost.localdomain,172.16.1.1'}\n\n    def send(self, request, stream=False, timeout=None, verify=True, cert=None, proxies=None):\n        \"\"\"Sends PreparedRequest object. Returns Response object.\n    \n        :param request: The :class:`PreparedRequest <PreparedRequest>` being sent.\n        :param stream: (optional) Whether to stream the request content.\n        :param timeout: (optional) How long to wait for the server to send\n            data before giving up, as a float, or a (`connect timeout, read\n            timeout <user/advanced.html#timeouts>`_) tuple.\n        :type timeout: float or tuple\n        :param verify: (optional) Whether to verify SSL certificates.\n        :param cert: (optional) Any user-provided SSL certificate to be trusted.\n        :param proxies: (optional) The proxies dictionary to apply to the request.\n        \"\"\"\n    \n        conn = self.get_connection(request.url, proxies)\n    \n        self.cert_verify(conn, request.url, verify, cert)\n        url = self.request_url(request, proxies)\n        self.add_headers(request)\n    \n        chunked = not (request.body is None or 'Content-Length' in request.headers)\n    \n        if isinstance(timeout, tuple):\n            try:\n                connect, read = timeout\n                timeout = TimeoutSauce(connect=connect, read=read)\n            except ValueError as e:\n                # this may raise a string formatting error.\n                err = (\"Invalid timeout {0}. Pass a (connect, read) \"\n                       \"timeout tuple, or a single float to set \"\n                       \"both timeouts to the same value\".format(timeout))\n                raise ValueError(err)\n        else:\n            timeout = TimeoutSauce(connect=timeout, read=timeout)\n    \n        try:\n            if not chunked:\n                resp = conn.urlopen(\n                    method=request.method,\n                    url=url,\n                    body=request.body,\n                    headers=request.headers,\n                    redirect=False,\n                    assert_same_host=False,\n                    preload_content=False,\n                    decode_content=False,\n                    retries=self.max_retries,\n                    timeout=timeout\n                )\n    \n            # Send the request.\n            else:\n                if hasattr(conn, 'proxy_pool'):\n                    conn = conn.proxy_pool\n    \n                low_conn = conn._get_conn(timeout=DEFAULT_POOL_TIMEOUT)\n    \n                try:\n                    low_conn.putrequest(request.method,\n                                        url,\n                                        skip_accept_encoding=True)\n    \n                    for header, value in request.headers.items():\n                        low_conn.putheader(header, value)\n    \n                    low_conn.endheaders()\n    \n                    for i in request.body:\n                        low_conn.send(hex(len(i))[2:].encode('utf-8'))\n                        low_conn.send(b'\\r\\n')\n                        low_conn.send(i)\n                        low_conn.send(b'\\r\\n')\n                    low_conn.send(b'0\\r\\n\\r\\n')\n    \n                    r = low_conn.getresponse()\n                    resp = HTTPResponse.from_httplib(\n                        r,\n                        pool=conn,\n                        connection=low_conn,\n                        preload_content=False,\n                        decode_content=False\n                    )\n                except:\n                    # If we hit any problems here, clean up the connection.\n                    # Then, reraise so that we can handle the actual exception.\n                    low_conn.close()\n                    raise\n    \n        except (ProtocolError, socket.error) as err:\n            raise ConnectionError(err, request=request)\n    \n        except MaxRetryError as e:\n            if isinstance(e.reason, ConnectTimeoutError):\n                raise ConnectTimeout(e, request=request)\n    \n            if isinstance(e.reason, ResponseError):\n                raise RetryError(e, request=request)\n    \n            raise ConnectionError(e, request=request)\n    \n        except ClosedPoolError as e:\n>           raise ConnectionError(e, request=request)\nE           requests.exceptions.ConnectionError: HTTPConnectionPool(host='httpbin.org', port=80): Pool is closed.\n\nrequests/adapters.py:426: ConnectionError\n\nDuring handling of the above exception, another exception occurred:\n\n    def test_urllib3_pool_connection_closed():\n        s = requests.Session()\n        s.mount('http://', HTTPAdapter(pool_connections=0, pool_maxsize=0))\n    \n        try:\n            s.get(httpbin('status/200'))\n        except ConnectionError as e:\n>           assert u\"HTTPConnectionPool(host='httpbin.org', port=80): Pool is closed.\" in str(e.message)\nE           AttributeError: 'ConnectionError' object has no attribute 'message'\n\ntest_requests.py:1666: AttributeError\n=============================== warnings summary ===============================\nrequests/packages/urllib3/connectionpool.py:95\n  /testbed/requests/packages/urllib3/connectionpool.py:95: DeprecationWarning: invalid escape sequence \\*\n    \"\"\"\n\nrequests/packages/urllib3/connectionpool.py:424\n  /testbed/requests/packages/urllib3/connectionpool.py:424: DeprecationWarning: invalid escape sequence \\*\n    \"\"\"\n\nrequests/packages/urllib3/connectionpool.py:772\n  /testbed/requests/packages/urllib3/connectionpool.py:772: DeprecationWarning: invalid escape sequence \\*\n    \"\"\"\n\nrequests/packages/urllib3/_collections.py:1\nrequests/packages/urllib3/_collections.py:1\n  /testbed/requests/packages/urllib3/_collections.py:1: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3, and in 3.10 it will stop working\n    from collections import Mapping, MutableMapping\n\nrequests/packages/urllib3/poolmanager.py:32\n  /testbed/requests/packages/urllib3/poolmanager.py:32: DeprecationWarning: invalid escape sequence \\*\n    \"\"\"\n\nrequests/models.py:783\n  /testbed/requests/models.py:783: DeprecationWarning: invalid escape sequence \\*\n    \"\"\"Returns the json-encoded content of a response, if any.\n\nrequests/api.py:59\n  /testbed/requests/api.py:59: DeprecationWarning: invalid escape sequence \\*\n    \"\"\"Sends a GET request.\n\nrequests/api.py:73\n  /testbed/requests/api.py:73: DeprecationWarning: invalid escape sequence \\*\n    \"\"\"Sends a OPTIONS request.\n\nrequests/api.py:86\n  /testbed/requests/api.py:86: DeprecationWarning: invalid escape sequence \\*\n    \"\"\"Sends a HEAD request.\n\nrequests/api.py:99\n  /testbed/requests/api.py:99: DeprecationWarning: invalid escape sequence \\*\n    \"\"\"Sends a POST request.\n\nrequests/api.py:113\n  /testbed/requests/api.py:113: DeprecationWarning: invalid escape sequence \\*\n    \"\"\"Sends a PUT request.\n\nrequests/api.py:126\n  /testbed/requests/api.py:126: DeprecationWarning: invalid escape sequence \\*\n    \"\"\"Sends a PATCH request.\n\nrequests/api.py:139\n  /testbed/requests/api.py:139: DeprecationWarning: invalid escape sequence \\*\n    \"\"\"Sends a DELETE request.\n\nrequests/sessions.py:470\n  /testbed/requests/sessions.py:470: DeprecationWarning: invalid escape sequence \\*\n    \"\"\"Sends a GET request. Returns :class:`Response` object.\n\nrequests/sessions.py:480\n  /testbed/requests/sessions.py:480: DeprecationWarning: invalid escape sequence \\*\n    \"\"\"Sends a OPTIONS request. Returns :class:`Response` object.\n\nrequests/sessions.py:490\n  /testbed/requests/sessions.py:490: DeprecationWarning: invalid escape sequence \\*\n    \"\"\"Sends a HEAD request. Returns :class:`Response` object.\n\nrequests/sessions.py:500\n  /testbed/requests/sessions.py:500: DeprecationWarning: invalid escape sequence \\*\n    \"\"\"Sends a POST request. Returns :class:`Response` object.\n\nrequests/sessions.py:511\n  /testbed/requests/sessions.py:511: DeprecationWarning: invalid escape sequence \\*\n    \"\"\"Sends a PUT request. Returns :class:`Response` object.\n\nrequests/sessions.py:521\n  /testbed/requests/sessions.py:521: DeprecationWarning: invalid escape sequence \\*\n    \"\"\"Sends a PATCH request. Returns :class:`Response` object.\n\nrequests/sessions.py:531\n  /testbed/requests/sessions.py:531: DeprecationWarning: invalid escape sequence \\*\n    \"\"\"Sends a DELETE request. Returns :class:`Response` object.\n\ntest_requests.py::RequestsTestCase::test_BASICAUTH_TUPLE_HTTP_200_OK_GET\n  /testbed/requests/models.py:168: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3, and in 3.10 it will stop working\n    if isinstance(hook, collections.Callable):\n\ntest_requests.py::TestContentEncodingDetection::test_html4_pragma\ntest_requests.py::TestContentEncodingDetection::test_html_charset\ntest_requests.py::TestContentEncodingDetection::test_none\ntest_requests.py::TestContentEncodingDetection::test_precedence\ntest_requests.py::TestContentEncodingDetection::test_xhtml_pragma\ntest_requests.py::TestContentEncodingDetection::test_xml\n  /testbed/requests/utils.py:294: DeprecationWarning: In requests 3.0, get_encodings_from_content will be removed. For more information, please see the discussion on issue #2266. (This warning should only appear once.)\n    warnings.warn((\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n==================================== PASSES ====================================\n=========================== short test summary info ============================\nPASSED test_requests.py::RequestsTestCase::test_BASICAUTH_TUPLE_HTTP_200_OK_GET\nPASSED test_requests.py::RequestsTestCase::test_DIGESTAUTH_QUOTES_QOP_VALUE\nPASSED test_requests.py::RequestsTestCase::test_DIGESTAUTH_WRONG_HTTP_401_GET\nPASSED test_requests.py::RequestsTestCase::test_DIGEST_AUTH_RETURNS_COOKIE\nPASSED test_requests.py::RequestsTestCase::test_DIGEST_AUTH_SETS_SESSION_COOKIES\nPASSED test_requests.py::RequestsTestCase::test_DIGEST_HTTP_200_OK_GET\nPASSED test_requests.py::RequestsTestCase::test_DIGEST_STREAM\nPASSED test_requests.py::RequestsTestCase::test_HTTP_200_OK_GET_ALTERNATIVE\nPASSED test_requests.py::RequestsTestCase::test_HTTP_200_OK_GET_WITH_MIXED_PARAMS\nPASSED test_requests.py::RequestsTestCase::test_HTTP_200_OK_GET_WITH_PARAMS\nPASSED test_requests.py::RequestsTestCase::test_HTTP_200_OK_HEAD\nPASSED test_requests.py::RequestsTestCase::test_HTTP_200_OK_PUT\nPASSED test_requests.py::RequestsTestCase::test_HTTP_302_ALLOW_REDIRECT_GET\nPASSED test_requests.py::RequestsTestCase::test_LocationParseError\nPASSED test_requests.py::RequestsTestCase::test_POSTBIN_GET_POST_FILES\nPASSED test_requests.py::RequestsTestCase::test_POSTBIN_GET_POST_FILES_WITH_DATA\nPASSED test_requests.py::RequestsTestCase::test_auth_is_retained_for_redirect_on_host\nPASSED test_requests.py::RequestsTestCase::test_auth_is_stripped_on_redirect_off_host\nPASSED test_requests.py::RequestsTestCase::test_autoset_header_values_are_native\nPASSED test_requests.py::RequestsTestCase::test_basic_auth_str_is_always_native\nPASSED test_requests.py::RequestsTestCase::test_basic_building\nPASSED test_requests.py::RequestsTestCase::test_basicauth_with_netrc\nPASSED test_requests.py::RequestsTestCase::test_can_send_bytes_bytearray_objects_with_files\nPASSED test_requests.py::RequestsTestCase::test_can_send_file_object_with_non_string_filename\nPASSED test_requests.py::RequestsTestCase::test_can_send_nonstring_objects_with_files\nPASSED test_requests.py::RequestsTestCase::test_cannot_send_unprepared_requests\nPASSED test_requests.py::RequestsTestCase::test_connection_error_invalid_domain\nPASSED test_requests.py::RequestsTestCase::test_connection_error_invalid_port\nPASSED test_requests.py::RequestsTestCase::test_cookie_as_dict_items\nPASSED test_requests.py::RequestsTestCase::test_cookie_as_dict_keeps_items\nPASSED test_requests.py::RequestsTestCase::test_cookie_as_dict_keeps_len\nPASSED test_requests.py::RequestsTestCase::test_cookie_as_dict_keys\nPASSED test_requests.py::RequestsTestCase::test_cookie_as_dict_values\nPASSED test_requests.py::RequestsTestCase::test_cookie_parameters\nPASSED test_requests.py::RequestsTestCase::test_cookie_persists_via_api\nPASSED test_requests.py::RequestsTestCase::test_cookie_quote_wrapped\nPASSED test_requests.py::RequestsTestCase::test_cookie_removed_on_expire\nPASSED test_requests.py::RequestsTestCase::test_cookie_sent_on_redirect\nPASSED test_requests.py::RequestsTestCase::test_custom_content_type\nPASSED test_requests.py::RequestsTestCase::test_decompress_gzip\nPASSED test_requests.py::RequestsTestCase::test_different_encodings_dont_break_post\nPASSED test_requests.py::RequestsTestCase::test_entry_points\nPASSED test_requests.py::RequestsTestCase::test_fixes_1329\nPASSED test_requests.py::RequestsTestCase::test_generic_cookiejar_works\nPASSED test_requests.py::RequestsTestCase::test_get_auth_from_url\nPASSED test_requests.py::RequestsTestCase::test_get_auth_from_url_encoded_hashes\nPASSED test_requests.py::RequestsTestCase::test_get_auth_from_url_encoded_spaces\nPASSED test_requests.py::RequestsTestCase::test_get_auth_from_url_not_encoded_spaces\nPASSED test_requests.py::RequestsTestCase::test_get_auth_from_url_percent_chars\nPASSED test_requests.py::RequestsTestCase::test_header_keys_are_native\nPASSED test_requests.py::RequestsTestCase::test_header_remove_is_case_insensitive\nPASSED test_requests.py::RequestsTestCase::test_headers_on_session_with_None_are_not_sent\nPASSED test_requests.py::RequestsTestCase::test_history_is_always_a_list\nPASSED test_requests.py::RequestsTestCase::test_hook_receives_request_arguments\nPASSED test_requests.py::RequestsTestCase::test_http_error\nPASSED test_requests.py::RequestsTestCase::test_invalid_url\nPASSED test_requests.py::RequestsTestCase::test_json_param_post_content_type_works\nPASSED test_requests.py::RequestsTestCase::test_links\nPASSED test_requests.py::RequestsTestCase::test_long_authinfo_in_url\nPASSED test_requests.py::RequestsTestCase::test_manual_redirect_with_partial_body_read\nPASSED test_requests.py::RequestsTestCase::test_mixed_case_scheme_acceptable\nPASSED test_requests.py::RequestsTestCase::test_no_content_length\nPASSED test_requests.py::RequestsTestCase::test_nonhttp_schemes_dont_check_URLs\nPASSED test_requests.py::RequestsTestCase::test_override_content_length\nPASSED test_requests.py::RequestsTestCase::test_param_cookiejar_works\nPASSED test_requests.py::RequestsTestCase::test_params_are_added_before_fragment\nPASSED test_requests.py::RequestsTestCase::test_params_are_merged_case_sensitive\nPASSED test_requests.py::RequestsTestCase::test_path_is_not_double_encoded\nPASSED test_requests.py::RequestsTestCase::test_prepare_request_with_bytestring_url\nPASSED test_requests.py::RequestsTestCase::test_prepared_from_session\nPASSED test_requests.py::RequestsTestCase::test_prepared_request_hook\nPASSED test_requests.py::RequestsTestCase::test_pyopenssl_redirect\nPASSED test_requests.py::RequestsTestCase::test_redirect_with_wrong_gzipped_header\nPASSED test_requests.py::RequestsTestCase::test_request_and_response_are_pickleable\nPASSED test_requests.py::RequestsTestCase::test_request_cookie_overrides_session_cookie\nPASSED test_requests.py::RequestsTestCase::test_request_cookies_not_persisted\nPASSED test_requests.py::RequestsTestCase::test_request_ok_set\nPASSED test_requests.py::RequestsTestCase::test_requests_history_is_saved\nPASSED test_requests.py::RequestsTestCase::test_requests_in_history_are_not_overridden\nPASSED test_requests.py::RequestsTestCase::test_response_decode_unicode\nPASSED test_requests.py::RequestsTestCase::test_response_is_iterable\nPASSED test_requests.py::RequestsTestCase::test_response_iter_lines\nPASSED test_requests.py::RequestsTestCase::test_session_hooks_are_overriden_by_request_hooks\nPASSED test_requests.py::RequestsTestCase::test_session_hooks_are_used_with_no_request_hooks\nPASSED test_requests.py::RequestsTestCase::test_session_pickling\nPASSED test_requests.py::RequestsTestCase::test_set_cookie_on_301\nPASSED test_requests.py::RequestsTestCase::test_status_raising\nPASSED test_requests.py::RequestsTestCase::test_time_elapsed_blank\nPASSED test_requests.py::RequestsTestCase::test_transport_adapter_ordering\nPASSED test_requests.py::RequestsTestCase::test_unconsumed_session_response_closes_connection\nPASSED test_requests.py::RequestsTestCase::test_unicode_get\nPASSED test_requests.py::RequestsTestCase::test_unicode_header_name\nPASSED test_requests.py::RequestsTestCase::test_unicode_method_name\nPASSED test_requests.py::RequestsTestCase::test_unicode_multipart_post\nPASSED test_requests.py::RequestsTestCase::test_unicode_multipart_post_fieldnames\nPASSED test_requests.py::RequestsTestCase::test_uppercase_scheme_redirect\nPASSED test_requests.py::RequestsTestCase::test_urlencoded_get_query_multivalued_param\nPASSED test_requests.py::RequestsTestCase::test_user_agent_transfers\nPASSED test_requests.py::TestContentEncodingDetection::test_html4_pragma\nPASSED test_requests.py::TestContentEncodingDetection::test_html_charset\nPASSED test_requests.py::TestContentEncodingDetection::test_none\nPASSED test_requests.py::TestContentEncodingDetection::test_precedence\nPASSED test_requests.py::TestContentEncodingDetection::test_xhtml_pragma\nPASSED test_requests.py::TestContentEncodingDetection::test_xml\nPASSED test_requests.py::TestCaseInsensitiveDict::test_contains\nPASSED test_requests.py::TestCaseInsensitiveDict::test_copy\nPASSED test_requests.py::TestCaseInsensitiveDict::test_delitem\nPASSED test_requests.py::TestCaseInsensitiveDict::test_docstring_example\nPASSED test_requests.py::TestCaseInsensitiveDict::test_equality\nPASSED test_requests.py::TestCaseInsensitiveDict::test_fixes_649\nPASSED test_requests.py::TestCaseInsensitiveDict::test_get\nPASSED test_requests.py::TestCaseInsensitiveDict::test_getitem\nPASSED test_requests.py::TestCaseInsensitiveDict::test_iter\nPASSED test_requests.py::TestCaseInsensitiveDict::test_iterable_init\nPASSED test_requests.py::TestCaseInsensitiveDict::test_kwargs_init\nPASSED test_requests.py::TestCaseInsensitiveDict::test_len\nPASSED test_requests.py::TestCaseInsensitiveDict::test_lower_items\nPASSED test_requests.py::TestCaseInsensitiveDict::test_mapping_init\nPASSED test_requests.py::TestCaseInsensitiveDict::test_preserve_key_case\nPASSED test_requests.py::TestCaseInsensitiveDict::test_preserve_last_key_case\nPASSED test_requests.py::TestCaseInsensitiveDict::test_repr\nPASSED test_requests.py::TestCaseInsensitiveDict::test_setdefault\nPASSED test_requests.py::TestCaseInsensitiveDict::test_update\nPASSED test_requests.py::TestCaseInsensitiveDict::test_update_retains_unchanged\nPASSED test_requests.py::UtilsTestCase::test_address_in_network\nPASSED test_requests.py::UtilsTestCase::test_dotted_netmask\nPASSED test_requests.py::UtilsTestCase::test_get_auth_from_url\nPASSED test_requests.py::UtilsTestCase::test_get_environ_proxies\nPASSED test_requests.py::UtilsTestCase::test_get_environ_proxies_ip_ranges\nPASSED test_requests.py::UtilsTestCase::test_guess_filename_when_filename_is_an_int\nPASSED test_requests.py::UtilsTestCase::test_guess_filename_when_int\nPASSED test_requests.py::UtilsTestCase::test_guess_filename_with_file_like_obj\nPASSED test_requests.py::UtilsTestCase::test_guess_filename_with_unicode_name\nPASSED test_requests.py::UtilsTestCase::test_is_ipv4_address\nPASSED test_requests.py::UtilsTestCase::test_is_valid_cidr\nPASSED test_requests.py::UtilsTestCase::test_requote_uri_properly_requotes\nPASSED test_requests.py::UtilsTestCase::test_requote_uri_with_unquoted_percents\nPASSED test_requests.py::UtilsTestCase::test_super_len_io_streams\nPASSED test_requests.py::TestMorselToCookieExpires::test_expires_invalid_int\nPASSED test_requests.py::TestMorselToCookieExpires::test_expires_invalid_str\nPASSED test_requests.py::TestMorselToCookieExpires::test_expires_none\nPASSED test_requests.py::TestMorselToCookieExpires::test_expires_valid_str\nPASSED test_requests.py::TestMorselToCookieMaxAge::test_max_age_invalid_str\nPASSED test_requests.py::TestMorselToCookieMaxAge::test_max_age_valid_int\nPASSED test_requests.py::TestTimeout::test_stream_timeout\nPASSED test_requests.py::TestTimeout::test_invalid_timeout\nPASSED test_requests.py::TestTimeout::test_none_timeout\nPASSED test_requests.py::TestTimeout::test_read_timeout\nPASSED test_requests.py::TestTimeout::test_connect_timeout\nPASSED test_requests.py::TestTimeout::test_total_timeout_connect\nPASSED test_requests.py::TestTimeout::test_encoded_methods\nPASSED test_requests.py::TestRedirects::test_requests_are_updated_each_time\nPASSED test_requests.py::test_data_argument_accepts_tuples\nPASSED test_requests.py::test_prepared_request_empty_copy\nPASSED test_requests.py::test_prepared_request_no_cookies_copy\nPASSED test_requests.py::test_prepared_request_complete_copy\nPASSED test_requests.py::test_prepare_unicode_url\nPASSED test_requests.py::test_urllib3_retries\nPASSED test_requests.py::test_vendor_aliases\nXPASS test_requests.py::RequestsTestCase::test_response_iter_lines_reentrant \nFAILED test_requests.py::RequestsTestCase::test_conflicting_post_params - Typ...\nFAILED test_requests.py::test_urllib3_pool_connection_closed - AttributeError...\n============ 2 failed, 159 passed, 1 xpassed, 28 warnings in 8.60s =============\n", {"test_requests.py::RequestsTestCase::test_BASICAUTH_TUPLE_HTTP_200_OK_GET": "PASSED", "test_requests.py::RequestsTestCase::test_DIGESTAUTH_QUOTES_QOP_VALUE": "PASSED", "test_requests.py::RequestsTestCase::test_DIGESTAUTH_WRONG_HTTP_401_GET": "PASSED", "test_requests.py::RequestsTestCase::test_DIGEST_AUTH_RETURNS_COOKIE": "PASSED", "test_requests.py::RequestsTestCase::test_DIGEST_AUTH_SETS_SESSION_COOKIES": "PASSED", "test_requests.py::RequestsTestCase::test_DIGEST_HTTP_200_OK_GET": "PASSED", "test_requests.py::RequestsTestCase::test_DIGEST_STREAM": "PASSED", "test_requests.py::RequestsTestCase::test_HTTP_200_OK_GET_ALTERNATIVE": "PASSED", "test_requests.py::RequestsTestCase::test_HTTP_200_OK_GET_WITH_MIXED_PARAMS": "PASSED", "test_requests.py::RequestsTestCase::test_HTTP_200_OK_GET_WITH_PARAMS": "PASSED", "test_requests.py::RequestsTestCase::test_HTTP_200_OK_HEAD": "PASSED", "test_requests.py::RequestsTestCase::test_HTTP_200_OK_PUT": "PASSED", "test_requests.py::RequestsTestCase::test_HTTP_302_ALLOW_REDIRECT_GET": "PASSED", "test_requests.py::RequestsTestCase::test_LocationParseError": "PASSED", "test_requests.py::RequestsTestCase::test_POSTBIN_GET_POST_FILES": "PASSED", "test_requests.py::RequestsTestCase::test_POSTBIN_GET_POST_FILES_WITH_DATA": "PASSED", "test_requests.py::RequestsTestCase::test_auth_is_retained_for_redirect_on_host": "PASSED", "test_requests.py::RequestsTestCase::test_auth_is_stripped_on_redirect_off_host": "PASSED", "test_requests.py::RequestsTestCase::test_autoset_header_values_are_native": "PASSED", "test_requests.py::RequestsTestCase::test_basic_auth_str_is_always_native": "PASSED", "test_requests.py::RequestsTestCase::test_basic_building": "PASSED", "test_requests.py::RequestsTestCase::test_basicauth_with_netrc": "PASSED", "test_requests.py::RequestsTestCase::test_can_send_bytes_bytearray_objects_with_files": "PASSED", "test_requests.py::RequestsTestCase::test_can_send_file_object_with_non_string_filename": "PASSED", "test_requests.py::RequestsTestCase::test_can_send_nonstring_objects_with_files": "PASSED", "test_requests.py::RequestsTestCase::test_cannot_send_unprepared_requests": "PASSED", "test_requests.py::RequestsTestCase::test_connection_error_invalid_domain": "PASSED", "test_requests.py::RequestsTestCase::test_connection_error_invalid_port": "PASSED", "test_requests.py::RequestsTestCase::test_cookie_as_dict_items": "PASSED", "test_requests.py::RequestsTestCase::test_cookie_as_dict_keeps_items": "PASSED", "test_requests.py::RequestsTestCase::test_cookie_as_dict_keeps_len": "PASSED", "test_requests.py::RequestsTestCase::test_cookie_as_dict_keys": "PASSED", "test_requests.py::RequestsTestCase::test_cookie_as_dict_values": "PASSED", "test_requests.py::RequestsTestCase::test_cookie_parameters": "PASSED", "test_requests.py::RequestsTestCase::test_cookie_persists_via_api": "PASSED", "test_requests.py::RequestsTestCase::test_cookie_quote_wrapped": "PASSED", "test_requests.py::RequestsTestCase::test_cookie_removed_on_expire": "PASSED", "test_requests.py::RequestsTestCase::test_cookie_sent_on_redirect": "PASSED", "test_requests.py::RequestsTestCase::test_custom_content_type": "PASSED", "test_requests.py::RequestsTestCase::test_decompress_gzip": "PASSED", "test_requests.py::RequestsTestCase::test_different_encodings_dont_break_post": "PASSED", "test_requests.py::RequestsTestCase::test_entry_points": "PASSED", "test_requests.py::RequestsTestCase::test_fixes_1329": "PASSED", "test_requests.py::RequestsTestCase::test_generic_cookiejar_works": "PASSED", "test_requests.py::RequestsTestCase::test_get_auth_from_url": "PASSED", "test_requests.py::RequestsTestCase::test_get_auth_from_url_encoded_hashes": "PASSED", "test_requests.py::RequestsTestCase::test_get_auth_from_url_encoded_spaces": "PASSED", "test_requests.py::RequestsTestCase::test_get_auth_from_url_not_encoded_spaces": "PASSED", "test_requests.py::RequestsTestCase::test_get_auth_from_url_percent_chars": "PASSED", "test_requests.py::RequestsTestCase::test_header_keys_are_native": "PASSED", "test_requests.py::RequestsTestCase::test_header_remove_is_case_insensitive": "PASSED", "test_requests.py::RequestsTestCase::test_headers_on_session_with_None_are_not_sent": "PASSED", "test_requests.py::RequestsTestCase::test_history_is_always_a_list": "PASSED", "test_requests.py::RequestsTestCase::test_hook_receives_request_arguments": "PASSED", "test_requests.py::RequestsTestCase::test_http_error": "PASSED", "test_requests.py::RequestsTestCase::test_invalid_url": "PASSED", "test_requests.py::RequestsTestCase::test_json_param_post_content_type_works": "PASSED", "test_requests.py::RequestsTestCase::test_links": "PASSED", "test_requests.py::RequestsTestCase::test_long_authinfo_in_url": "PASSED", "test_requests.py::RequestsTestCase::test_manual_redirect_with_partial_body_read": "PASSED", "test_requests.py::RequestsTestCase::test_mixed_case_scheme_acceptable": "PASSED", "test_requests.py::RequestsTestCase::test_no_content_length": "PASSED", "test_requests.py::RequestsTestCase::test_nonhttp_schemes_dont_check_URLs": "PASSED", "test_requests.py::RequestsTestCase::test_override_content_length": "PASSED", "test_requests.py::RequestsTestCase::test_param_cookiejar_works": "PASSED", "test_requests.py::RequestsTestCase::test_params_are_added_before_fragment": "PASSED", "test_requests.py::RequestsTestCase::test_params_are_merged_case_sensitive": "PASSED", "test_requests.py::RequestsTestCase::test_path_is_not_double_encoded": "PASSED", "test_requests.py::RequestsTestCase::test_prepare_request_with_bytestring_url": "PASSED", "test_requests.py::RequestsTestCase::test_prepared_from_session": "PASSED", "test_requests.py::RequestsTestCase::test_prepared_request_hook": "PASSED", "test_requests.py::RequestsTestCase::test_pyopenssl_redirect": "PASSED", "test_requests.py::RequestsTestCase::test_redirect_with_wrong_gzipped_header": "PASSED", "test_requests.py::RequestsTestCase::test_request_and_response_are_pickleable": "PASSED", "test_requests.py::RequestsTestCase::test_request_cookie_overrides_session_cookie": "PASSED", "test_requests.py::RequestsTestCase::test_request_cookies_not_persisted": "PASSED", "test_requests.py::RequestsTestCase::test_request_ok_set": "PASSED", "test_requests.py::RequestsTestCase::test_requests_history_is_saved": "PASSED", "test_requests.py::RequestsTestCase::test_requests_in_history_are_not_overridden": "PASSED", "test_requests.py::RequestsTestCase::test_response_decode_unicode": "PASSED", "test_requests.py::RequestsTestCase::test_response_is_iterable": "PASSED", "test_requests.py::RequestsTestCase::test_response_iter_lines": "PASSED", "test_requests.py::RequestsTestCase::test_session_hooks_are_overriden_by_request_hooks": "PASSED", "test_requests.py::RequestsTestCase::test_session_hooks_are_used_with_no_request_hooks": "PASSED", "test_requests.py::RequestsTestCase::test_session_pickling": "PASSED", "test_requests.py::RequestsTestCase::test_set_cookie_on_301": "PASSED", "test_requests.py::RequestsTestCase::test_status_raising": "PASSED", "test_requests.py::RequestsTestCase::test_time_elapsed_blank": "PASSED", "test_requests.py::RequestsTestCase::test_transport_adapter_ordering": "PASSED", "test_requests.py::RequestsTestCase::test_unconsumed_session_response_closes_connection": "PASSED", "test_requests.py::RequestsTestCase::test_unicode_get": "PASSED", "test_requests.py::RequestsTestCase::test_unicode_header_name": "PASSED", "test_requests.py::RequestsTestCase::test_unicode_method_name": "PASSED", "test_requests.py::RequestsTestCase::test_unicode_multipart_post": "PASSED", "test_requests.py::RequestsTestCase::test_unicode_multipart_post_fieldnames": "PASSED", "test_requests.py::RequestsTestCase::test_uppercase_scheme_redirect": "PASSED", "test_requests.py::RequestsTestCase::test_urlencoded_get_query_multivalued_param": "PASSED", "test_requests.py::RequestsTestCase::test_user_agent_transfers": "PASSED", "test_requests.py::TestContentEncodingDetection::test_html4_pragma": "PASSED", "test_requests.py::TestContentEncodingDetection::test_html_charset": "PASSED", "test_requests.py::TestContentEncodingDetection::test_none": "PASSED", "test_requests.py::TestContentEncodingDetection::test_precedence": "PASSED", "test_requests.py::TestContentEncodingDetection::test_xhtml_pragma": "PASSED", "test_requests.py::TestContentEncodingDetection::test_xml": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_contains": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_copy": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_delitem": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_docstring_example": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_equality": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_fixes_649": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_get": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_getitem": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_iter": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_iterable_init": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_kwargs_init": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_len": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_lower_items": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_mapping_init": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_preserve_key_case": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_preserve_last_key_case": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_repr": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_setdefault": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_update": "PASSED", "test_requests.py::TestCaseInsensitiveDict::test_update_retains_unchanged": "PASSED", "test_requests.py::UtilsTestCase::test_address_in_network": "PASSED", "test_requests.py::UtilsTestCase::test_dotted_netmask": "PASSED", "test_requests.py::UtilsTestCase::test_get_auth_from_url": "PASSED", "test_requests.py::UtilsTestCase::test_get_environ_proxies": "PASSED", "test_requests.py::UtilsTestCase::test_get_environ_proxies_ip_ranges": "PASSED", "test_requests.py::UtilsTestCase::test_guess_filename_when_filename_is_an_int": "PASSED", "test_requests.py::UtilsTestCase::test_guess_filename_when_int": "PASSED", "test_requests.py::UtilsTestCase::test_guess_filename_with_file_like_obj": "PASSED", "test_requests.py::UtilsTestCase::test_guess_filename_with_unicode_name": "PASSED", "test_requests.py::UtilsTestCase::test_is_ipv4_address": "PASSED", "test_requests.py::UtilsTestCase::test_is_valid_cidr": "PASSED", "test_requests.py::UtilsTestCase::test_requote_uri_properly_requotes": "PASSED", "test_requests.py::UtilsTestCase::test_requote_uri_with_unquoted_percents": "PASSED", "test_requests.py::UtilsTestCase::test_super_len_io_streams": "PASSED", "test_requests.py::TestMorselToCookieExpires::test_expires_invalid_int": "PASSED", "test_requests.py::TestMorselToCookieExpires::test_expires_invalid_str": "PASSED", "test_requests.py::TestMorselToCookieExpires::test_expires_none": "PASSED", "test_requests.py::TestMorselToCookieExpires::test_expires_valid_str": "PASSED", "test_requests.py::TestMorselToCookieMaxAge::test_max_age_invalid_str": "PASSED", "test_requests.py::TestMorselToCookieMaxAge::test_max_age_valid_int": "PASSED", "test_requests.py::TestTimeout::test_stream_timeout": "PASSED", "test_requests.py::TestTimeout::test_invalid_timeout": "PASSED", "test_requests.py::TestTimeout::test_none_timeout": "PASSED", "test_requests.py::TestTimeout::test_read_timeout": "PASSED", "test_requests.py::TestTimeout::test_connect_timeout": "PASSED", "test_requests.py::TestTimeout::test_total_timeout_connect": "PASSED", "test_requests.py::TestTimeout::test_encoded_methods": "PASSED", "test_requests.py::TestRedirects::test_requests_are_updated_each_time": "PASSED", "test_requests.py::test_data_argument_accepts_tuples": "PASSED", "test_requests.py::test_prepared_request_empty_copy": "PASSED", "test_requests.py::test_prepared_request_no_cookies_copy": "PASSED", "test_requests.py::test_prepared_request_complete_copy": "PASSED", "test_requests.py::test_prepare_unicode_url": "PASSED", "test_requests.py::test_urllib3_retries": "PASSED", "test_requests.py::test_vendor_aliases": "PASSED", "test_requests.py::RequestsTestCase::test_conflicting_post_params": "FAILED", "test_requests.py::test_urllib3_pool_connection_closed": "FAILED"}]